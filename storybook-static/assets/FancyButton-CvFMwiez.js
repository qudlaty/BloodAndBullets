var ne=Object.defineProperty;var ie=(a,n,e)=>n in a?ne(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var l=(a,n,e)=>ie(a,typeof n!="symbol"?n+"":n,e);import{j as s}from"./jsx-runtime-BjgbQsUx.js";import{R as x,r as re}from"./index-DEBVq0NN.js";import{g as oe,G as T,S as b,f as k,h as ae,E as d,n as le,r as S,i as B,j as ce,k as de,l as H,m as F,t as z,H as ue,W as me,o as pe}from"./InfoPanel-PTV2Oowe.js";import{L,I as he}from"./InventoryItem-D8StE-3N.js";import{S as fe}from"./SlideInPanel-BwJf2swz.js";import{I as ye}from"./InfoPanelSwitchButton-RICm6IwB.js";const ge="_board_puwts_1",be="_board__row_puwts_15",M={board:ge,board__row:be,"board--rotated":"_board--rotated_puwts_32"};class G extends x.Component{constructor(){super(...arguments);l(this,"handleClick",e=>{console.log("Handles Click on Board",e),this.props.onClick(e)});l(this,"EntityPawns",()=>this.props.entities.map(e=>s.jsx(V,{entity:e},e.name)));l(this,"BoardSquares",()=>{let e=0,t=0,i;return Array(this.props.size).fill(null).map((o,c)=>{i=0;const u=Array(this.props.size).fill(null).map((m,h)=>this.renderSquare(e++,t,i++));return s.jsx("div",{className:M.board__row,children:u},t++)})})}renderSquare(e,t,i){const r=this.props.squares[e];return s.jsx(W,{squareId:e,className:oe(r),onClick:this.handleClick,blood:r&&r.blood,items:r&&r.items,itemsNumber:r&&r.items&&r.items.length},`r${t}_c${e}`)}render(){let e=M.board;return this.props.isRotated&&(e+=` ${M["board--rotated"]} board--rotated`),s.jsxs("div",{className:e,style:this.props.style,children:[this.BoardSquares(),this.EntityPawns()]})}}G.__docgenInfo={description:`Board component renders the rectangular grid of Squares
and a layer of floating EntityPawns`,methods:[{name:"handleClick",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:{name:"number"}}],returns:null},{name:"renderSquare",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:{name:"number"}},{name:"rowId",optional:!1,type:{name:"number"}},{name:"colId",optional:!1,type:{name:"number"}}],returns:null},{name:"EntityPawns",docblock:null,modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"ReactElement"}],raw:"ReactElement[]"}}},{name:"BoardSquares",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Board",props:{squares:{required:!0,tsType:{name:"Array",elements:[{name:"Square"}],raw:"Square[]"},description:""},entities:{required:!0,tsType:{name:"Array",elements:[{name:"Entity"}],raw:"Entity[]"},description:""},size:{required:!0,tsType:{name:"number"},description:""},isRotated:{required:!0,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"any"},description:""}}};class xe extends x.Component{render(){const n=this.props.entities.filter(t=>t.isFriendly).map(t=>s.jsx(P,{entity:t,onInventoryClick:this.props.onInventoryClick,processInterface:()=>this.props.processInterface()},t.name)),e=this.props.entities.filter(t=>!t.isFriendly).map(t=>s.jsx(P,{entity:t,processInterface:()=>this.props.processInterface()},t.name));return s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"entities-list__header",children:"List of Entities:"}),s.jsx("div",{className:"entities-list",children:n}),s.jsx("div",{className:"entities-list",children:e})]})}}xe.__docgenInfo={description:"",methods:[],displayName:"ListOfEntities",props:{entities:{required:!0,tsType:{name:"Array",elements:[{name:"Entity"}],raw:"Entity[]"},description:""},onInventoryClick:{required:!0,tsType:{name:"any"},description:""},processInterface:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ve={box:{name:"box",icon:"📦",hp:50,maxHp:70,isBreathing:!1,isPassable:!1,position:{x:4,y:5}},redBarrel:{name:"redBarrel",icon:"🛢️",hp:50,maxHp:70,isBreathing:!1,isPassable:!0,position:{x:4,y:5}}};class qe{constructor(){l(this,"model");l(this,"run",()=>{console.log("Running Game Logic"),console.log(T.entities)});l(this,"calculateNextInterfaceState",n=>{const e=n,{entities:t,selected:i}=e;return t.forEach(r=>{r===i&&b.markAvailableDestinationsForSelectedEntity(i)}),e});l(this,"syncSquaresWithEntities",n=>{const e=le(n.squares);b.squares=e;const t=d.entities;return t.length&&S(e,"entity","entities"),t.forEach(i=>{b.setEntityWithinApropriateSquare(i)}),{squares:e,entities:t}});l(this,"deselectAllEntities",()=>{S(d.entities,"active"),S(b.squares,"isChosenDestination","isAvailableDestination")});l(this,"ceaseFire",()=>{S(T.entities,"isShooting")});this.model=T}calculateNextGameStateAfterProcessingAGivenEntity(n,e){if(e.actionPoints===0){const r=e;return k.send(`${r.name} has not enough AP to execute this action`),k.setCursorMessage("NO AP"),n}const t=n,{entities:i}=t;return this.processAnEntity(e),t.enemiesAlive=this.calculateNumberOfAliveEnemies(i),t.friendsAlive=this.calculateNumberOfAliveFriends(i),ae.runScripts(e),t}processAnEntity(n){console.log("start procesing",n),d.moveEntityRandomly(n),d.moveEntityIntoChosenDestination(n),d.stopShootingWhenForbidden(n),d.isEntityTargettingSomethingAlive(n)&&d.fireAShot(n),d.ceaseFireNextTickIfNoAliveTargets(n),n.bleedExternally(),d.stopBreathingForKilledEntity(n),b.markAvailableDestinationsForSelectedEntity(n),console.log("end procesing",n)}calculateNumberOfAliveFriends(n){return n.filter(e=>e.isFriendly&&e.isAlive).length}calculateNumberOfAliveEnemies(n){let e=0;return n.forEach(t=>{t.isFriendly||t.isAlive&&e++}),e}}const w=new qe;class Ie{constructor(){Object.assign(this,{entities:d.entities,squares:b.squares,selected:d.selected,targeted:null,targetedSquareNumber:null,arenaSize:10,squareSize:40,enemiesAlive:w.calculateNumberOfAliveEnemies(d.entities),friendsAlive:w.calculateNumberOfAliveFriends(d.entities),isAutoLoopOn:!1,isBoardRotated:!1,isEditorOn:!1})}}let f=null;class Se{constructor(n){l(this,"entitiesProcessingLoopIntervalHandle",null);l(this,"playerActionTime",1e3);l(this,"toggleEditorMode",()=>{f.state.isEditorOn?f.setState(n=>({squares:b.squares,entities:d.entities,isEditorOn:!1})):(S(f.state.squares,"blood","entity"),f.setState(n=>({entities:[],isEditorOn:!0})))});l(this,"loop",()=>{if(console.debug("Attempting loop"),this.isTurnInProgress){setTimeout(this.loop,1e3);return}console.debug("Executing nextStep"),this.nextTurn(),f.state.isAutoLoopOn&&(console.debug("Scheduling next loop step in 1s"),setTimeout(this.loop,1e3))});l(this,"endTurn",()=>{f.setState({isAutoLoopOn:!1}),this.nextTurn()});l(this,"executeActions",()=>{k.send("Executing actions",B.debug),f.setState(n=>w.calculateNextGameStateAfterProcessingAGivenEntity(n,d.selected),()=>this.afterExecuteActions()),this.processInterface()});l(this,"afterExecuteActions",()=>{this.setSquaresAccordingToEntities()});l(this,"handleKeyPress",n=>{switch(console.log(n),n){case"space":this.executeActions();break}});l(this,"handleClickV2",n=>{f.setState(e=>{var v;let{selected:t,targeted:i,targetedSquareNumber:r}=e;const{squares:o,entities:c,isEditorOn:u}=e,m=i;i=o[n],r=n;const h=()=>m===i;if(b.markSquareAtIndexAsTargeted(n),t&&(t.isShooting=!1),u){const p=i.position;switch(k.send(`Editing square #${n} at ${p.x},${p.y}`,B.debug),i.squareType){case"floor":i.squareType="wall";break;case"wall":i.squareType="nothing";break;case"nothing":i.squareType="monster-filter";break;case"monster-filter":i.squareType="floor";break}}if(h()&&t&&y(i)){const p=b.getSquarePositionFromIndex(n);t.attackPosition(p),b.markSquareAtIndexAsAttacked(n),delete t.moveDestination,delete t.isShooting,S(o,"isChosenDestination"),this.executeActions()}else h()&&i.isAvailableDestination&&(t.setMoveDestinationSquareByNumber(n),delete t.targetPosition,delete t.isShooting,S(o,"isAttacked"),this.executeActions());if(h()){const p=((v=i==null?void 0:i.entities)==null?void 0:v.length)&&(i==null?void 0:i.entities[0]);!t&&(p!=null&&p.isAlive)&&(p!=null&&p.isFriendly)?(t=d.selectEntityFromGivenSquare(t,i),k.send(`Selecting an entity ${t.name} at ${t.position.x},${t.position.y}`,B.debug),d.setSelected(t),this.setSelectedInStateAccordingToSelectedInEntitiesService()):ce(t,i)}function y(p){return!!(p.entities&&p.entities.find(q=>q.isAlive))}return{squares:o,entities:c,selected:t,targeted:i,targetedSquareNumber:r}},()=>this.processInterface())});l(this,"aggro",n=>{const e=n.position,i=this.findEntitiesThatAreClose(e).filter(r=>r.hp>0);if(i.length){const r=i[0];n.attackPosition(r.position)}});l(this,"nuke",n=>{f.setState(e=>{const{entities:t}=e;return t.forEach(i=>{i.hp=i.hp-n}),{entities:t}},()=>{this.processEntities()})});l(this,"toggleRotateBoard",()=>{f.setState({isBoardRotated:!f.state.isBoardRotated})});l(this,"switchAutoLoop",()=>{f.setState(n=>{const e=!n.isAutoLoopOn;return console.info("Switching auto loop to",e),{isAutoLoopOn:e}},()=>{f.state.isAutoLoopOn&&this.loop()})});l(this,"onInventoryClick",(n,e)=>{f.setState(t=>{const i=[].concat(t.entities);d.entities=i;const r=d.getEntityId(n),o=d.findEntityById(r);return o.equipment.hands&&o.equipment.hands.name===e?o.unEquipFromHands():o.equipInHands(e),o.isShooting=!1,{entities:i}}),console.log(n,e)});l(this,"handleDeselectAllEntities",()=>{f.setState(n=>{let{selected:e}=n;const{squares:t,entities:i}=n;return w.deselectAllEntities(),e=void 0,{squares:t,entities:i,selected:e}},()=>{})});l(this,"ceaseFire",()=>{S(d.entities,"isShooting"),this.processInterface()});l(this,"startUpdatingClickPositionCssVariables",()=>{const n=(e,t)=>{console.debug("CLICK EVENT AT:",e,t),document.documentElement.style.setProperty("--mouse-click-position-x",e+"px"),document.documentElement.style.setProperty("--mouse-click-position-y",t+"px")};document.addEventListener("click",e=>n(e.clientX,e.clientY))});f=n}zoomIn(){f.setState(n=>({squareSize:n.squareSize+5}))}zoomOut(){f.setState(n=>({squareSize:n.squareSize-5}))}get isTurnInProgress(){return this.entitiesProcessingLoopIntervalHandle}nextTurn(){f.turnNumber++,console.info("Starting processing turn #",f.turnNumber),d.refillActionPointsForAllEntities(),d.rechargeWeaponsForAllEntities(),S(d.entities,"targetPosition","isShooting"),S(b.squares,"isAttacked"),this.processEntities()}processEntities(){this.drawAggro(),this.entitiesProcessingLoopIntervalHandle=setInterval(()=>this.processNextUnprocessedEntity(),100)}processNextUnprocessedEntity(){const n=d.entities.filter(e=>!e.isFriendly&&e.isAlive&&e.actionPoints>0);if(n.length){const e=n[0];this.setNewStateAfterProcessingChosenEntity(e)}else clearInterval(this.entitiesProcessingLoopIntervalHandle),this.entitiesProcessingLoopIntervalHandle=null,console.log("All entities processed.")}setNewStateAfterProcessingChosenEntity(n){f.setState(e=>w.calculateNextGameStateAfterProcessingAGivenEntity(e,n),()=>this.setSquaresAccordingToEntities()),this.processInterface()}processInterface(){f.setState(n=>w.calculateNextInterfaceState(n),()=>this.setSquaresAccordingToEntities())}setSelectedInStateAccordingToSelectedInEntitiesService(){f.setState(n=>({selected:d.selected}))}setSquaresAccordingToEntities(){f.setState(n=>w.syncSquaresWithEntities(n))}drawAggro(){d.entities.forEach(n=>{n.isFriendly||(n.isShooting=!1,this.aggro(n))})}findEntitiesThatAreClose(n){const{x:e,y:t}=n;let i=[];for(let r=t-1;r<=t+1;r++)if(!(r<0||r>=b.arenaSize))for(let o=e-1;o<=e+1;o++){if(o<0||o>=b.arenaSize||o===e&&r===t)continue;const c=d.getEntitiesAtGivenPosition({x:o,y:r});i=i.concat(c)}return i}}class P extends x.Component{constructor(e){super(e);l(this,"handleInventoryItemClick",e=>{this.props.onInventoryClick(this.props.entity,e)});l(this,"handleInventoryButtonClick",()=>{this.setState(e=>({isInventoryOpen:!e.isInventoryOpen}))});l(this,"onDrop",e=>{const{entity:t}=this.props;t.equipment.hands&&t.equipment.hands.name===e&&(t.unEquipFromHands(),t.isShooting=!1);const i=t.takeFromInventory(e);i instanceof de?(console.log("Dropping Item"),t.square.addItem(i)):i instanceof H&&(console.log("Dropping Entity"),d.addEntity(i),t.square.entity=i,t.square.entities.push(i),i.position={...t.position}),this.props.processInterface()});l(this,"onReload",e=>{const{entity:t}=this.props;d.reloadWeapon(t,e),this.props.processInterface()});this.state={isInventoryOpen:!1}}get distanceToTarget(){const{entity:e}=this.props;return e.targetPosition?Number(F(e.targetPosition.x-e.position.x,e.targetPosition.y-e.position.y).toFixed(2)):null}render(){var m;const{entity:e}=this.props;if(!e)return null;const t="entity-card";let i=t;e.active&&(i+=` ${t}--active`),e.isFriendly&&(i+=` ${t}--friendly`),e.isDead&&(i+=` ${t}--dead`);const r=e.equipment&&e.equipment.hands,o=r&&[r];let c,u;return e.bleedingReductionPerTurn&&(u=s.jsxs("span",{className:"bleeding-info__reduction",children:["(-",e.bleedingReductionPerTurn,s.jsx("small",{className:"bleeding-info__reduction__unit",children:"/Turn"}),")"]})),e.bleeding&&(c=s.jsxs("span",{className:"bleeding-info",children:["Bleeding: ",e.bleeding," ",u]})),s.jsxs("div",{className:i,children:[s.jsx("div",{children:s.jsx("div",{className:"entity-card__portrait",children:s.jsx(O,{emoji:e.icon})})}),s.jsxs("strong",{title:"Name",children:[e.isDead&&"Dead ",e.name]}),s.jsx("br",{}),s.jsx("small",{className:"entity-data__rank",children:e==null?void 0:e.rank}),s.jsx(ye,{item:e}),s.jsxs("div",{className:"entity-data__status-displays",children:[s.jsx(L,{className:"full",label:"AP",current:e.actionPoints,max:e.maxActionPoints}),s.jsx(L,{className:"full",label:"HP",current:e.hp,max:e.maxHp}),c]}),s.jsx("div",{className:"equipment-panel",children:s.jsx(R,{label:"",title:"In hands",interactButtonText:"Unequip →",onInteract:this.state.isInventoryOpen&&this.handleInventoryItemClick,onReload:this.props.entity.isAlive&&this.onReload,onDrop:this.props.entity.isDead&&this.onDrop,inventory:o,shorterDisplay:this.props.shorterDisplay,processInterface:()=>this.props.processInterface()})}),this.state.isInventoryOpen&&s.jsx("div",{className:"inventory-panel",children:s.jsx(R,{label:"Inventory",title:"In backpack",interactButtonText:" ← Equip",onInteract:this.handleInventoryItemClick,onDrop:this.onDrop,onClose:this.handleInventoryButtonClick,inventory:e.inventory,processInterface:()=>this.props.processInterface()})}),s.jsxs("button",{className:"inventory-item__button inventory-button",onClick:()=>this.handleInventoryButtonClick(),children:["INVENTORY (",((m=e.inventory)==null?void 0:m.length)||0,")"]}),e.isDead&&s.jsx("button",{className:"inventory-item__button pick-up-button",onClick:()=>this.props.onEntityClick(e.name),children:"Pick up the body"})]})}}P.__docgenInfo={description:"",methods:[{name:"handleInventoryItemClick",docblock:null,modifiers:[],params:[{name:"itemName",optional:!1,type:{name:"string"}}],returns:{type:{name:"void"}}},{name:"handleInventoryButtonClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onDrop",docblock:null,modifiers:[],params:[{name:"itemName",optional:!1,type:{name:"string"}}],returns:null},{name:"onReload",docblock:null,modifiers:[],params:[{name:"weapon",optional:!1,type:{name:"RangedWeapon",alias:"RangedWeapon"}}],returns:null},{name:"distanceToTarget",docblock:null,modifiers:["get"],params:[],returns:{type:{name:"number"}}}],displayName:"EntityCard",props:{entity:{required:!0,tsType:{name:"Entity"},description:""},shorterDisplay:{required:!1,tsType:{name:"boolean"},description:""},processInterface:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};class V extends x.Component{constructor(){super(...arguments);l(this,"randomTime",`${(Math.random()+.5).toFixed(2)}s`)}render(){var q,I;const{entity:e}=this.props,t=b.getSquareFromPosition(e.position.x,e.position.y),i="entity-pawn__icon";let r=`${i}`,o=z(e,i);o+=z(t,i),r+=` ${o} `;const c=e.isFriendly?"friendly":"hostile",u=e.isFriendly?"green":"red",m=e.isShooting?5:1,h=e.isBreathing?`breathing ${this.randomTime} alternate infinite linear`:"none",y=10,v=2,p={weaponType:(I=(q=e.equipment)==null?void 0:q.hands)==null?void 0:I.type,actionId:e.attackNumber};return s.jsxs("div",{className:`entity-pawn ${e.isDead?"entity-pawn--dead":""}`,style:{left:`calc(${y+3}px + ${e.position.x*v*2}px + ${e.position.x}em)`,top:`calc(${y+3}px + ${e.position.y*v*2}px + ${e.position.y}em)`,zIndex:m},children:[s.jsx("div",{className:"entity-pawn__health-display "+c,children:s.jsx(ee,{current:e.hp,max:e.maxHp,color:u})}),s.jsx("div",{className:r,style:{animation:h},children:s.jsx(O,{emoji:e.icon})}),e.isShooting&&s.jsx(te,{...e,...p})]},e.name)}}V.__docgenInfo={description:"",methods:[],displayName:"EntityPawn",props:{entity:{required:!0,tsType:{name:"Entity"},description:""}}};class O extends x.Component{constructor(){super(...arguments);l(this,"emojiMap",{"🐙":"octopus","🦑":"squid","🕷️":"spider","🦟":"mosquito","🐜":"ant","🦠":"microbe","🧑‍🚀":"astronaut","🤖":"robot","🛢️":"oildrum"})}render(){const{emoji:e}=this.props,t=this.emojiMap[e];let i=s.jsx(s.Fragment,{});return t?i=s.jsx("div",{className:"emoji emoji-"+t}):i=s.jsx("div",{children:e}),s.jsx(s.Fragment,{children:i})}}O.__docgenInfo={description:"@description Maps emojis to pictures with pre-picked versions of them",methods:[],displayName:"EmojiMapper",props:{emoji:{required:!0,tsType:{name:"string"},description:""}}};class U extends x.Component{constructor(e){super(e);l(this,"boxSerialNumber",0);l(this,"handleInventoryButtonClick",()=>{this.setState(e=>({isInventoryOpen:!e.isInventoryOpen}))});l(this,"onItemClick",e=>{const{selected:t,targeted:i,squareNumber:r}=this.props,o=b.getSquarePositionFromIndex(r);if(t&&i&&t.position.x===o.x&&t.position.y===o.y){let c=i.takeFromInventory(e);if(!c){c=i.entities.find(m=>m.name===e);const u=b.getSquareFromPosition(o.x,o.y);d.removeEntityFromListOfEntities(u.entities,c),d.removeEntity(c)}t.addToInventory(c),t.equipment.hands||t.equipInHands(c.name)}else k.send(`${t.name} can't pick up ${e}. They need to be on the same square to do that.`);this.props.processInterface()});this.state={isInventoryOpen:!1}}componentDidUpdate(e){e.squareNumber!==this.props.squareNumber&&this.setState({isInventoryOpen:!1})}onMoveClick(e,t){const i=b.getSquareFromPosition(t.x,t.y);e.setMoveDestinationPosition(t),i.isChosenDestination=!0,this.props.processInterface()}onAttackClick(e,t){e.attackPosition(t),this.props.processInterface()}onAddStructureClick(e,t){const i=Object.assign({},ve[t]),r=Object.assign({},e);i.position=r,i.name+=this.boxSerialNumber++;const o=b.getSquareFromPosition(e.x,e.y),c=new H(i);o.entities.push(c),d.entities.push(c),this.props.processInterface()}render(){const{targeted:e,selected:t,squareNumber:i}=this.props;if(!e)return null;const r=b.getSquarePositionFromIndex(i),o=[],c=[];let u;if(e.entities&&e.entities.length&&e.entities.forEach(h=>{t!==h&&o.push(s.jsx(P,{onEntityClick:this.onItemClick,onInventoryClick:this.props.onInventoryClick,entity:h,shorterDisplay:!0,processInterface:()=>this.props.processInterface()},h.name))}),e.items&&e.items.length&&(u=s.jsxs(s.Fragment,{children:[this.state.isInventoryOpen&&s.jsx("div",{className:"inventory-panel",children:s.jsx(R,{label:"Items on the floor",title:"On the floor",interactButtonText:"↖ Pick up",onInteract:this.onItemClick,onDrop:null,onReload:null,onClose:this.handleInventoryButtonClick,inventory:e.items,processInterface:()=>this.props.processInterface()})}),s.jsxs("button",{className:`
              inventory-list__button 
              inventory-button
            `,onClick:()=>this.handleInventoryButtonClick(),children:["Show items on the floor (",e.items.length,")"]})]})),t){const h=F(r.x-t.position.x,r.y-t.position.y);h.toFixed(2),h!==0&&(e.isAvailableDestination&&(c[0]=s.jsx("button",{onClick:()=>this.onMoveClick(t,r),className:"button",children:"Move"},"move")),e.entity&&(c[1]=s.jsx("button",{onClick:()=>this.onAttackClick(t,r),className:"button",children:"Attack"},"attack")))}r&&(r.x,r.y),e.blood&&e.blood;const m=b.getSquareFromPosition(r.x,r.y);return s.jsxs("div",{className:this.props.className,children:[s.jsx("strong",{className:"targeted__label",children:"Target square Info"}),s.jsxs("code",{children:[m.icon," ",m.name]}),m.description&&s.jsx("p",{className:"square-description",children:m.description}),s.jsx("div",{children:o}),s.jsx("div",{children:c}),u]})}}U.__docgenInfo={description:"",methods:[{name:"handleInventoryButtonClick",docblock:null,modifiers:[],params:[],returns:null},{name:"onItemClick",docblock:null,modifiers:[],params:[{name:"itemName",optional:!1,type:{name:"string"}}],returns:{type:{name:"void"}}},{name:"onMoveClick",docblock:null,modifiers:[],params:[{name:"selected",optional:!1,type:{name:"Entity",alias:"Entity"}},{name:"targetedSquarePosition",optional:!1,type:{name:"Position",alias:"Position"}}],returns:{type:{name:"void"}}},{name:"onAttackClick",docblock:null,modifiers:[],params:[{name:"selected",optional:!1,type:{name:"Entity",alias:"Entity"}},{name:"targetedSquarePosition",optional:!1,type:{name:"Position",alias:"Position"}}],returns:{type:{name:"void"}}},{name:"onAddStructureClick",docblock:null,modifiers:[],params:[{name:"targetedSquarePosition",optional:!1,type:{name:"Position",alias:"Position"}},{name:"structureType",optional:!1,type:{name:"string"}}],returns:{type:{name:"void"}}}],displayName:"TargetedSquareInfo",props:{className:{required:!0,tsType:{name:"string"},description:""},squareNumber:{required:!0,tsType:{name:"number"},description:""},squares:{required:!0,tsType:{name:"Array",elements:[{name:"Square"}],raw:"Square[]"},description:""},selected:{required:!0,tsType:{name:"Entity"},description:""},targeted:{required:!0,tsType:{name:"Square"},description:""},processInterface:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};class X extends x.Component{render(){return this.props.selected?s.jsxs("div",{className:"selected",children:[s.jsx("strong",{className:"selected__label",children:"Active entity "}),s.jsx("div",{children:s.jsx(P,{onInventoryClick:this.props.onInventoryClick,entity:this.props.selected,processInterface:()=>this.props.processInterface()})}),s.jsxs("button",{onClick:this.props.handleDeselectAllEntities,className:"button",children:[" ","Deselect"]})]}):null}}X.__docgenInfo={description:"",methods:[],displayName:"SelectedEntityInfo",props:{selected:{required:!0,tsType:{name:"Entity"},description:""},handleDeselectAllEntities:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},processInterface:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let g=null;class ke extends x.PureComponent{constructor(e){super(e);l(this,"renderCounter",0);l(this,"turnNumber",0);T.loadBuiltInMap(),T.loadPredefinedEntitities(),d.setSelected(d.findEntityById("Lazer Blady")),this.state=new Ie,g=new Se(this),console.log("Initial state dump:",this.state)}componentDidMount(){this.startIfAutoLoopIsOn(),k.send("Mission loaded"),g.processInterface(),g.startUpdatingClickPositionCssVariables()}startIfAutoLoopIsOn(){this.state.isAutoLoopOn&&g.loop()}calculateFriendlyActionPoints(){const t=(i,r)=>i+r.actionPoints;return d.entities.filter(i=>i.isFriendly).reduce(t,0)}render(){return s.jsxs("div",{className:"game game-hud",children:[s.jsx(se,{messageText:k.cursorMessage,messageTimeInMs:1500},k.cursorMessageNumber),s.jsxs("section",{className:"section-details",children:[s.jsx(X,{selected:this.state.selected,handleDeselectAllEntities:g.handleDeselectAllEntities,onInventoryClick:g.onInventoryClick,processInterface:()=>g.processInterface()}),s.jsx(U,{className:"targeted",squareNumber:this.state.targetedSquareNumber,squares:this.state.squares,selected:this.state.selected,targeted:this.state.targeted,onInventoryClick:g.onInventoryClick,processInterface:()=>g.processInterface()})]}),s.jsxs("main",{className:"section-main",children:[s.jsx("div",{className:"game__board",children:s.jsx(J,{boardIsRotated:this.state.isBoardRotated,children:s.jsx(G,{squares:this.state.squares,entities:this.state.entities,onClick:e=>g.handleClickV2(e),size:this.state.arenaSize,isRotated:this.state.isBoardRotated,style:{fontSize:`${this.state.squareSize}px`}})})}),s.jsxs("section",{className:"section-status",children:[s.jsx(Q,{}),s.jsx(ue,{title:"=>",children:s.jsx("button",{onClick:g.endTurn,className:"button next_tick next_turn",children:"End Turn"})})]})]}),s.jsx(fe,{title:"Actions",initiallyOpen:!0,children:s.jsx("div",{className:"game__info",children:s.jsxs("div",{className:"actions",children:[s.jsx("button",{onClick:g.toggleEditorMode,children:"Editor Mode"}),s.jsx("button",{onClick:T.saveMap,children:"Save Map"}),s.jsx("button",{onClick:()=>T.loadMap(g),children:"Load Map"}),s.jsx("button",{onClick:()=>T.generateMAP(),children:"Generate MAP"}),s.jsx("button",{onClick:g.toggleRotateBoard,children:"Rotate Board"}),s.jsx("button",{onClick:g.zoomIn,children:"Zoom In (+)"}),s.jsx("button",{onClick:g.zoomOut,children:"Zoom Out (-)"}),s.jsx("button",{onClick:()=>g.nuke(40),className:"button-nuke",children:"Nuke All"}),s.jsx("button",{onClick:g.ceaseFire,children:"Cease Fire"}),s.jsx("button",{onClick:g.executeActions,className:"execute_actions",children:"Execute Actions"}),s.jsxs("span",{className:"st ep-counter",children:["Turn: ",this.turnNumber]}),s.jsxs("label",{className:"button auto-cycle",children:[s.jsx("input",{type:"checkbox",checked:this.state.isAutoLoopOn,onChange:g.switchAutoLoop}),s.jsx("span",{children:"Auto Cycle"})]}),s.jsx("button",{onClick:g.endTurn,className:"button next_tick next_turn",children:"End Turn"})]})})})]})}}ke.__docgenInfo={description:"Game composes all the parts of the interface together",methods:[{name:"startIfAutoLoopIsOn",docblock:null,modifiers:[],params:[],returns:null},{name:"calculateFriendlyActionPoints",docblock:null,modifiers:[],params:[],returns:{type:{name:"number"}}}],displayName:"Game"};class Y extends x.PureComponent{render(){const{bloodAmount:n}=this.props;if(n<=0){console.error("Blood amount zero or negative.");return}const e=[];let t=n;const r=0,c=3;for(;t--;)e.push(s.jsx("span",{className:"blood__drop",style:{position:"absolute",fontSize:`${1+Math.random()*c}em`,left:`calc(${r+Math.random()*(100-2*r)}% - 0.4em)`,top:`calc(${r+Math.random()*(100-2*r)}% - 0.5em)`},children:"o"},t));return s.jsxs("div",{className:"square__blood",style:{background:"rgba(255, 0, 0, 0)"},children:[e,s.jsx("span",{className:"blood__text",children:n})]})}}Y.__docgenInfo={description:`@description
Visualises blood by adding red background
and a little number in the corner.

@param bloodAmount - number representing the amount of blood.`,methods:[],displayName:"Blood",props:{bloodAmount:{required:!0,tsType:{name:"number"},description:""}}};class K extends x.PureComponent{constructor(){super(...arguments);l(this,"itemsIcons",[])}render(){const{items:e,itemsNumber:t}=this.props;return e?(e.forEach(i=>{const r=i;r.icon&&this.itemsIcons.push(s.jsx("div",{className:"square__item-icon",children:r.icon}))}),s.jsxs("div",{className:"square__items",children:[s.jsx("div",{className:"square__items-icons",children:this.itemsIcons}),s.jsx("div",{className:"square__items-number",children:t||""})]})):null}}K.__docgenInfo={description:`@description
Displays icons of items on the square, as well as little number in the corner.
@param itemsNumber - number of items on the square
@param items - array of items on the square`,methods:[],displayName:"Items",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"Item"}],raw:"Item[]"},description:""},itemsNumber:{required:!0,tsType:{name:"number"},description:""}}};class W extends x.PureComponent{constructor(){super(...arguments);l(this,"onClick",()=>{this.props.onClick(this.props.squareId)})}render(){function e(r){let o=6;const c=[];for(;o--;)c.push(s.jsx("div",{className:`${r}__cuboid-face`},o));return s.jsx("div",{className:`${r}__cuboid`,children:c})}const t=b.squares[this.props.squareId],i=t==null?void 0:t.icon;return s.jsxs("button",{className:"square "+this.props.className,onClick:this.onClick,children:[s.jsx("div",{className:"square__content",children:i}),s.jsx(Y,{bloodAmount:this.props.blood}),s.jsx(K,{items:this.props.items,itemsNumber:this.props.itemsNumber}),e("square")]})}}W.__docgenInfo={description:`Displays a single square with blood and items on it.
@param squareId - Unique square id
@param className - Optional CSS class name
@param onClick - Handler for this square click
@param blood - The amount of blood on this square
@param items - A list of items on this square
@param itemsNumber - A number of items on this square.`,methods:[{name:"onClick",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SquareComponent",props:{squareId:{required:!0,tsType:{name:"number"},description:"Unique square id"},className:{required:!1,tsType:{name:"string"},description:"Optional CSS class name"},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(squareIndex: number) => void",signature:{arguments:[{type:{name:"number"},name:"squareIndex"}],return:{name:"void"}}},description:"Handler for this square click"},blood:{required:!0,tsType:{name:"number"},description:"The amount of blood on this square"},items:{required:!0,tsType:{name:"Array",elements:[{name:"Item"}],raw:"Item[]"},description:"A list of items on this square"},itemsNumber:{required:!0,tsType:{name:"number"},description:`A number of items on this square.
Here to trigger an update when list length changes.`}}};class Z extends x.PureComponent{constructor(){super(...arguments);l(this,"state",{})}render(){var e,t;return s.jsx("div",{className:"cell",style:(e=this.props)==null?void 0:e.style,children:s.jsx("div",{className:"cell__contents",children:(t=this.props)==null?void 0:t.children})})}}Z.__docgenInfo={description:'Renders children in a container with a "cell" CSS class',methods:[],displayName:"Cell",props:{children:{required:!1,tsType:{name:"any"},description:""},style:{required:!1,tsType:{name:"any"},description:""}}};class Ne extends x.Component{renderGrid(){const{cellSize:n,gapSize:e,width:t,height:i,startAt:r,cellBorderColor:o}=this.props,c=[],u=n>-1?{fontSize:`${n}px`}:{},m=e>-1?{gridGap:`${e}px ${e}px`}:{},h={gridTemplateColumns:`repeat(${t+1}, 1em)`,...m},y={gridTemplateRows:`repeat(${i+1}, 1em)`,...m,...u},v=o?{border:`1px solid ${o}`}:{};for(let p=0;p<=i;p++){const q=r[1]+p,I=[];for(let j=0;j<=t;j++){const A=r[0]+j,E=s.jsxs(Z,{style:v,children:[A,", ",q]},`$key_${A}_${q}`);I.push(E)}c.push(s.jsx("div",{className:"row",style:h,children:I},`$key_X_${q}`))}return s.jsx("div",{className:"grid",style:y,children:c})}render(){return this.renderGrid()}}Ne.__docgenInfo={description:"Renders a grid X by Y, starting from a given position",methods:[{name:"renderGrid",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Grid",props:{cellSize:{required:!1,tsType:{name:"number"},description:"size of the grid square in pixels"},gapSize:{required:!1,tsType:{name:"number"},description:"size of the grid gap between squares in pixels"},width:{required:!0,tsType:{name:"number"},description:"width of the grid in number of squares"},height:{required:!0,tsType:{name:"number"},description:"height of the grid in number of squares"},startAt:{required:!0,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"params given to the first square (top left one)"},cellBorderColor:{required:!1,tsType:{name:"string"},description:"color for the cell border"}}};class J extends x.Component{constructor(e){super(e);l(this,"outerDivReference");l(this,"innerDivReference");l(this,"scroll",{x:0,y:0});l(this,"recalculateInnerDivSize",()=>{const e=this.innerDivReference.current,t=this.outerDivReference.current;if(e){const i=e.firstChild;if(i&&i.getBoundingClientRect){const r=i.getBoundingClientRect(),o=t.getBoundingClientRect(),c=`${Math.max(r.width,o.width)*1.5}px`,u=`${Math.max(r.height,o.height)*1.5}px`;e.style.width=c,e.style.height=u}}this.centerInnerDivAfterResize()});l(this,"centerInnerDivAfterResize",()=>{const e=this.innerDivReference.current,t=this.outerDivReference.current;if(e&&t){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=(r.width-i.width)/2,c=(r.height-i.height)/2;this.scroll.x=o,this.scroll.y=c,this.executeScroll()}});l(this,"onMouseDown",e=>{e.button===2&&(document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),e.preventDefault())});l(this,"onMouseMove",e=>{this.scrollRelativeXY(e.movementX,e.movementY)});l(this,"onMouseUp",e=>{document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),e.preventDefault()});this.outerDivReference=x.createRef(),this.innerDivReference=x.createRef()}componentDidMount(){this.recalculateInnerDivSize(),window.addEventListener("resize",this.recalculateInnerDivSize),this.props.centeredOn&&this.centerInnerDivOnATarget(this.props.centeredOn)}componentWillUnmount(){window.removeEventListener("resize",this.recalculateInnerDivSize),this.innerDivReference.current.firstChild.removeEventListener("transitionend",this.recalculateInnerDivSize)}componentDidUpdate(e){this.props.boardIsRotated!==e.boardIsRotated&&(this.recalculateInnerDivSize(),this.innerDivReference.current.firstChild.addEventListener("transitionend",this.recalculateInnerDivSize)),this.props.centeredOn!==e.centeredOn?this.centerInnerDivOnATarget(this.props.centeredOn):this.centerInnerDivAfterResize()}centerInnerDivOnATarget(e){const t=this.outerDivReference.current,i=t.querySelector(e);if(i){const r=t.getBoundingClientRect(),o=i.getBoundingClientRect(),c=o.left+o.width/2,u=r.left+r.width/2,m=o.top+o.height/2,h=r.top+r.height/2,y=c-u,v=m-h,p=t.scrollLeft,q=t.scrollTop;this.scroll.x=p+y,this.scroll.y=q+v,this.executeScroll()}}scrollRelativeXY(e,t){this.scroll.x-=e,this.scroll.y-=t,this.scroll.x<=0&&(this.scroll.x=0),this.scroll.y<=0&&(this.scroll.y=0),this.executeScroll()}executeScroll(){this.outerDivReference.current.scroll({top:this.scroll.y,left:this.scroll.x})}render(){return s.jsx("div",{className:"drag-scroll-area drag-scroll-area-external",ref:this.outerDivReference,onMouseDown:e=>this.onMouseDown(e),onContextMenu:e=>e.preventDefault(),children:s.jsx("div",{className:"drag-scroll-area drag-scroll-area-internal",ref:this.innerDivReference,children:this.props.children})})}}J.__docgenInfo={description:"Drag with right mouse button, to move content around",methods:[{name:"recalculateInnerDivSize",docblock:null,modifiers:[],params:[],returns:null},{name:"centerInnerDivAfterResize",docblock:null,modifiers:[],params:[],returns:null},{name:"centerInnerDivOnATarget",docblock:null,modifiers:[],params:[{name:"targetSelector",optional:!1,type:{name:"string"}}],returns:null},{name:"scrollRelativeXY",docblock:null,modifiers:[],params:[{name:"deltaX",optional:!1,type:{name:"number"}},{name:"deltaY",optional:!1,type:{name:"number"}}],returns:null},{name:"onMouseDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onMouseMove",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onMouseUp",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"executeScroll",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DragScrollArea",props:{children:{required:!0,tsType:{name:"JSX.Element"},description:""},centeredOn:{required:!1,tsType:{name:"string"},description:""},boardIsRotated:{required:!1,tsType:{name:"boolean"},description:""}}};class Ce extends x.Component{constructor(n){super(n),this.state={w:!1,s:!1,a:!1,d:!1,space:!1}}componentDidMount(){document.addEventListener("keydown",n=>this.onKeyDown(n),!1),document.addEventListener("keyup",n=>this.onKeyUp(n),!1)}onKeyDown(n){switch(n.keyCode){case 87:this.setState({w:!0}),this.props.onKeyPress("w");break;case 83:this.setState({s:!0}),this.props.onKeyPress("s");break;case 65:this.setState({a:!0}),this.props.onKeyPress("a");break;case 68:this.setState({d:!0}),this.props.onKeyPress("d");break;case 32:this.setState({space:!0}),this.props.onKeyPress("space");break}}onKeyUp(n){switch(n.keyCode){case 87:this.setState({w:!1});break;case 83:this.setState({s:!1});break;case 65:this.setState({a:!1});break;case 68:this.setState({d:!1});break;case 32:this.setState({space:!1});break}}render(){return s.jsxs("div",{className:"controls",children:["[",s.jsx("span",{className:`${this.state.w?"pressed":""} key`,children:"W"}),"] [",s.jsx("span",{className:`${this.state.s?"pressed":""} key`,children:"S"}),"] [",s.jsx("span",{className:`${this.state.a?"pressed":""} key`,children:"A"}),"] [",s.jsx("span",{className:`${this.state.d?"pressed":""} key`,children:"D"}),"]   [",s.jsx("span",{className:`${this.state.space?"pressed":""} key`,children:"space"}),"]"]})}}Ce.__docgenInfo={description:"",methods:[{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onKeyUp",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null}],displayName:"Controls",props:{keys:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onKeyPress:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: string) => void",signature:{arguments:[{type:{name:"string"},name:"key"}],return:{name:"void"}}},description:""}}};class Q extends x.Component{constructor(){super(...arguments);l(this,"messages",k.messages);l(this,"messageNumber");l(this,"renderMessage",(e,t)=>{const i=`000${t}`.slice(-3);return s.jsxs("li",{className:`message-level-${e.level}`,children:[s.jsx("span",{className:"message-number",children:i+" "}),s.jsx("span",{className:"message-timestamp",children:e.timestamp+" "}),s.jsx("span",{className:"message-text",children:e.message})]},`msg${t}`)})}shouldComponentUpdate(){return this.messages.length!==this.messageNumber}render(){if(!this.messages.length)return null;const e=this.messages.map((t,i)=>this.renderMessage(t,i));return this.messageNumber=this.messages.length,s.jsx("ul",{className:"messages",id:"messages",children:e})}scrollElement(){window.requestAnimationFrame(()=>{const e=document.getElementById("messages");e.scrollTop=e.scrollHeight})}componentDidUpdate(){this.messages.length&&this.scrollElement()}}Q.__docgenInfo={description:"",methods:[{name:"renderMessage",docblock:null,modifiers:[],params:[{name:"messageRecord",optional:!1,type:{name:"MessageRecord",alias:"MessageRecord"}},{name:"number",optional:!1,type:{name:"number"}}],returns:null},{name:"scrollElement",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MessageBox"};function R(a){var u,m;const n="inventory-list",[t,i]=re.useState(!0),r=`
    ${n} ${n}${t?"--expanded":"--collapsed"} ${a.className||""}
  `,o=(u=a.inventory)==null?void 0:u.map(h=>s.jsx(he,{item:h,interactButtonText:a.interactButtonText,shorterDisplay:a.shorterDisplay,onInteract:a.onInteract,onDrop:a.onDrop,onReload:a.onReload,processInterface:a.processInterface},`i${h.name}`)),c="inventory-list";return s.jsxs("div",{className:r,children:[a.label&&s.jsx("div",{className:`${c}__label`,children:a.label}),a.onClose&&s.jsx("button",{onClick:a.onClose,className:`
            ${c}__button
            ${c}__button-close
          `,children:"X"}),s.jsxs("div",{className:`${c}__items`,title:a.title,children:[o,((m=a.inventory)==null?void 0:m.length)>0?null:a.label&&s.jsx("span",{className:"is-empty",children:"is empty"})]})]})}R.__docgenInfo={description:"",methods:[],displayName:"InventoryList",props:{className:{required:!1,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},interactButtonText:{required:!0,tsType:{name:"string"},description:""},inventory:{required:!1,tsType:{name:"Array",elements:[{name:"Item"}],raw:"Item[]"},description:""},shorterDisplay:{required:!1,tsType:{name:"boolean"},description:""},processInterface:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};class ee extends x.Component{render(){if(this.props.current<=0)return null;const e={width:`${~~(this.props.current*100/this.props.max)}%`,backgroundColor:this.props.color};return s.jsxs("div",{className:"hpbar",children:[s.jsx("div",{className:"hpbar__indicator",style:e}),s.jsx("span",{className:"hpbar__text",children:this.props.current})]})}}ee.__docgenInfo={description:"",methods:[],displayName:"HpBar",props:{current:{required:!0,tsType:{name:"number"},description:""},max:{required:!0,tsType:{name:"number"},description:""},color:{required:!0,tsType:{name:"string"},description:""}}};function te({targetPosition:a,position:n,weaponType:e,actionId:t,runningTimeInMs:i=1e3,numberOfProjectiles:r=10,varianceBase:o=7}){const c=pe,u=a;let m=r;const h=[],y=`Entity-x${n.x}-y${n.y}-tx${u.x}-ty${u.y}-aid${t}`,v=`shooting-animation-${y}`;let p="",q="";const I=i??1e3;if(u&&n&&(a.x!==n.x||a.y!==n.y)&&u){const A=u.x-n.x,E=u.y-n.y,D=F(A,E),N=c(A,E);if(q=`
      @keyframes fading${v} {
        0%  {opacity: 1;}
        90% {opacity: 1;}
        100%  {opacity: 0;}
      }
      ${I>=0?`
          .fading-after-${I}ms-for-${v} {
              animation: fading${v} ${I}ms linear normal forwards 1;
          }`:""}
      `,e===me.energy){const _=`projectile${y}_beam`,C="",$=20;p=`
          @keyframes pulsing${y} {
            0%  {opacity: 0.1;}
            100%  {opacity: 1;}
          }

          @keyframes elongating${y} {
            0%  { width: calc(${D}em + ${D} * 4px - 20px); }
            100%  {width: calc(${D}em + ${D} * 4px - 20px); }
          }

          @keyframes swiping${y} {
            0%  {transform: rotate(${N+90-1}deg) translateX(${$}px);}
            50%  {transform: rotate(${N+90+1}deg) translateX(${$}px);}
            100%  {transform: rotate(${N+90-1}deg) translateX(${$}px);}
          }

          .${_} {
            width: ${D}em;
            height: 3px;
            border-radius: 5px;
            background: #F00;
            position: absolute;
            top: 0.5em;
            left: 0.5em;
            transform: rotate(${N+90}deg);/* overriden by swiping keyframes */
            transform-origin: left 0px;
            animation: pulsing${y} 0.1s ease infinite,
            elongating${y} 0.7s ease alternate infinite,
            swiping${y} 1s ease alternate infinite;
            box-shadow: 0 0 5px 5px white;
            z-index: 10;
          }
          `,h.push(s.jsx("div",{className:_,children:C},_))}else{for(;m--;){const C=Math.random()*o-o/2,$=Math.random()*o-o/2;p+=`
          @keyframes shooting${y}_${m} {
            0%   {transform: translate(0,0) rotate(${N}deg) scaleY(1)}
            100% {transform: translate(
              ${40*(u.x-n.x)+C}px,
              ${40*(u.y-n.y)+$}px
            ) rotate(${N}deg) scaleY(1)}
          }
          `,p+=`
          .projectile${y}_${m} {
            transform: rotateZ(${N}deg);
            animation: shooting${y}_${m} 0.8s linear infinite;
            animation-delay: ${m*.2}s;
          }`}const _=".";for(m=r;m--;){const C=`projectile projectile${y}_${m}`;h.push(s.jsx("div",{className:C,children:_},C))}}}const j=`shooting-visualization fading-after-${I}ms-for-${v}`;return s.jsxs("div",{className:j,children:[s.jsx("style",{children:p+q}),h]})}te.__docgenInfo={description:"Displays a shooting attack visualization",methods:[],displayName:"ShootingVisualization",props:{targetPosition:{required:!0,tsType:{name:"Position"},description:"Position of a target square in a grid"},position:{required:!0,tsType:{name:"Position"},description:"Position of a source square in a grid"},weaponType:{required:!0,tsType:{name:"WeaponType"},description:"Type of a weapon"},actionId:{required:!0,tsType:{name:"number"},description:"Unique number of this action - used to ensure each attack has a separate animation"},runningTimeInMs:{required:!1,tsType:{name:"number"},description:"Time to run the visualization animation, in milliseconds. 0 to not run at all, -1 to run infinitely",defaultValue:{value:"1000",computed:!1}},numberOfProjectiles:{required:!1,tsType:{name:"number"},description:"Number of shots when it's a projectile weapon",defaultValue:{value:"10",computed:!1}},varianceBase:{required:!1,tsType:{name:"number"},description:"Spread of bullets on target, in pixels",defaultValue:{value:"7",computed:!1}}}};const Te=({lineOfFireLength:a="20em",version:n=0,boltFlightTimeInHundredsOfMs:e=10})=>{const t={width:a},i={animationDuration:`${e*100}ms`},r=`bolt shooting version-${n}`;return s.jsx("div",{className:"line-of-fire",style:t,children:s.jsx("div",{className:r,style:i})})};Te.__docgenInfo={description:"A bolt rendered from a single div with a gradient",methods:[],displayName:"GradientBolt",props:{version:{required:!1,tsType:{name:"number"},description:"Number of the version of the bolt. 0-7",defaultValue:{value:"0",computed:!1}},lineOfFireLength:{required:!1,tsType:{name:"string"},description:"Length of the line of fire in any CSS units",defaultValue:{value:'"20em"',computed:!1}},boltFlightTimeInHundredsOfMs:{required:!1,tsType:{name:"number"},description:"Time the bolt will take to travel and vanish from the line of fire (with tail)",defaultValue:{value:"10",computed:!1}}}};function se({messageText:a="!",messageTimeInMs:n=1e3,messageColor:e="#eee"}){const t={color:e,animation:`fade-out ${n}ms linear forwards`};return s.jsx("div",{className:"cursor-message",style:t,children:a})}se.__docgenInfo={description:"",methods:[],displayName:"CursorMessage",props:{messageText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"!"',computed:!1}},messageTimeInMs:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1000",computed:!1}},messageColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#eee"',computed:!1}}}};var je=(a=>(a.solid="solid",a.dashed="dashed",a.dotted="dotted",a))(je||{});function Ae({title:a,children:n,className:e,width:t,height:i,textColor:r,textColorHover:o,textColorActive:c,backgroundColor:u,backgroundColorHover:m,backgroundColorActive:h,sideBorderColor:y,sideBorderColorHover:v,sideBorderColorActive:p,shadowColor:q,shadowColorHover:I,shadowColorActive:j,sideBorderStyle:A="dashed",sideBorderWidthInPixels:E}){const N=`
    fancy-button 
    ${e||""}
  `,_={"--text-color":r,"--text-color--hover":o,"--text-color--active":c,"--background-color":u,"--background-color--hover":m,"--background-color--active":h,"--shadow-color":q,"--shadow-color--hover":I,"--shadow-color--active":j,"--side-border-color":y,"--side-border-color--hover":v,"--side-border-color--active":p,"--side-border-style":A,...E&&{"--side-border-width":`${E}px`}},C={width:t,height:i,..._};return s.jsx("div",{className:N,title:a,style:C,children:n||"Primary Activation Taster"})}Ae.__docgenInfo={description:"A panel that slides in from the right",methods:[],displayName:"FancyButton",props:{className:{required:!1,tsType:{name:"string"},description:""},title:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},width:{required:!1,tsType:{name:"string"},description:""},height:{required:!1,tsType:{name:"string"},description:""},textColor:{required:!1,tsType:{name:"string"},description:""},textColorHover:{required:!1,tsType:{name:"string"},description:""},textColorActive:{required:!1,tsType:{name:"string"},description:""},backgroundColor:{required:!1,tsType:{name:"string"},description:""},backgroundColorHover:{required:!1,tsType:{name:"string"},description:""},backgroundColorActive:{required:!1,tsType:{name:"string"},description:""},shadowColor:{required:!1,tsType:{name:"string"},description:""},shadowColorHover:{required:!1,tsType:{name:"string"},description:""},shadowColorActive:{required:!1,tsType:{name:"string"},description:""},sideBorderColor:{required:!1,tsType:{name:"string"},description:""},sideBorderColorHover:{required:!1,tsType:{name:"string"},description:""},sideBorderColorActive:{required:!1,tsType:{name:"string"},description:""},sideBorderWidthInPixels:{required:!1,tsType:{name:"number"},description:""},sideBorderStyle:{required:!1,tsType:{name:"BorderStyle"},description:"",defaultValue:{value:"BorderStyle.dashed",computed:!0}}}};export{G as B,Ce as C,J as D,P as E,Ae as F,Te as G,ee as H,te as S,je as a,Z as b,Ne as c,W as d};
