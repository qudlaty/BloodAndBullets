(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],[,,,,,,function(e,t,n){e.exports={game:"Game_game__2BmQU",game__board:"Game_game__board__1AR5E",game__info:"Game_game__info__2XuYT",game__list:"Game_game__list__3Ltux",button:"Game_button__2usZ6","button-nuke":"Game_button-nuke__37qkj",actions:"Game_actions__2RncO","interaction-container":"Game_interaction-container__14p5W",selected:"Game_selected__Vfr4N",targeted:"Game_targeted__2kJbA",selected__label:"Game_selected__label__QlKmT",targeted__label:"Game_targeted__label__3dceM","step-counter":"Game_step-counter__3OklF","auto-cycle":"Game_auto-cycle__16n4Y"}},,function(e,t,n){e.exports={board:"Board_board__3vjsK",board__row:"Board_board__row__1-mls","board--rotated":"Board_board--rotated__2eonB"}},,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(10),o=n(1),s=n(2),c=n(4),l=n(3),u=n(5),p=n(7);function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];e.forEach((function(e){n.forEach((function(t){e&&(e[t]=void 0)}))}))}function d(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function m(e,t){return Math.floor(Math.random()*(t-e+1))+e}function f(e,t){var n;return t>=0?n=-Math.atan(e/t)*(180/Math.PI):t<0&&(n=180/Math.PI*(Math.atan(e/-t)+Math.PI)),n}function y(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function v(e,t){return!!(e&&t&&t.entity&&e.name===t.entity.name)}function b(e,t){var n={active:"active",isAvailableDestination:"is-available-destination",isChosenDestination:"is-chosen-destination",isBreathing:"breathing",isDead:"dead",isShooting:"shooting",isTargeted:"targeted",isLit:"is-lit",isInTwilightZone:"is-in-twilight-zone"},a="";return t?t+="--":t="",Object.keys(n).forEach((function(i){e[i]&&(a+=" ".concat(t).concat(n[i]))})),a}var g,E=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.parentClassBase,n=e.bloodAmount,a="".concat(t,"__blood"),r="\n        .".concat(a," {\n            background: rgba(255,0,0, ").concat((n/30).toFixed(2),");\n        }\n    ");return i.a.createElement("div",{className:"square__blood ".concat(a)},n,i.a.createElement("style",null,r))}}]),t}(i.a.Component),k=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.items,t=null,n=[];return e&&e.length&&(t=this.props.items.length,e.forEach((function(e){var t=e;t.icon&&n.push(i.a.createElement("div",{className:"square__item-icon"},t.icon))}))),i.a.createElement("div",{className:"square__items"},i.a.createElement("div",{className:"square__items-icons"},n),i.a.createElement("div",{className:"square__items-number"},t))}}]),t}(i.a.Component),O=(n(16),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).shouldComponentUpdate=function(e){return JSON.stringify(e)!==JSON.stringify(n.props)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.squareId,a=(t.isLit,t.items),r=t.blood,o="square",s="".concat("square").concat(n),c=null;return o+=b(this.props,"square"),"floor"==this.props.squareType?o+=" floor":"wall"==this.props.squareType?o+=" wall":"nothing"==this.props.squareType&&(o+=" nothing"),c=i.a.createElement("div",null,i.a.createElement(E,{parentClassBase:s,bloodAmount:r}),i.a.createElement(k,{items:a})),i.a.createElement("button",{className:o,onClick:function(){return e.props.onClick(e.props.squareId)}},c,i.a.createElement("div",{className:"square__content"},"\xa0"))}}]),t}(i.a.Component)),j=new(function(){function e(){Object(o.a)(this,e),this.messages=[]}return Object(s.a)(e,[{key:"send",value:function(e){this.messages.push(e)}}]),e}()),q=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).causesBleeding=0,n.range=0,n.damage=0,n}return Object(u.a)(t,e),t}((function e(){Object(o.a)(this,e),this.name=""})),_=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).rounds=0,n.maxRounds=5,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fire",value:function(){return this.rounds--,console.log("Firing ranged weapon. Damage: ",this.damage),this.damage}},{key:"reload",value:function(){this.rounds=this.maxRounds}},{key:"isAbleToFire",get:function(){return this.rounds>0}}]),t}(q),x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).type="projectile",n.range=4,n.damage=1,n.causesBleeding=4,n}return Object(u.a)(t,e),t}(_),S=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).type="lazer",n.range=6,n.damage=5,n.causesBleeding=0,n}return Object(u.a)(t,e),t}(_),I=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).name="M16",n.rounds=15,n.maxRounds=20,n.damage=2,n}return Object(u.a)(t,e),t}(x),C=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).name="Assault Lazer Cannon",n.rounds=3,n.maxRounds=3,n.damage=10,n}return Object(u.a)(t,e),t}(S),N=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).name="M41A Pulse Rifle",n.rounds=40,n.maxRounds=40,n.damage=1,n}return Object(u.a)(t,e),t}(x),A=function e(){Object(o.a)(this,e),this.name="An Entity",this.icon="E"},w=function(){function e(){Object(o.a)(this,e),this.position={x:void 0,y:void 0}}return Object(s.a)(e,[{key:"square",get:function(){return K.getSquare(this.position.x,this.position.y)}}]),e}(),D=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).moveDestination=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setMoveDestinationSquare",value:function(e){this.setMoveDestinationPosition(K.targetSquarePosition(e))}},{key:"setMoveDestinationPosition",value:function(e){var t=K.getSquare(e.x,e.y);!t.entity||t.entity.isDead?(this.moveDestination=e,h(K.squares,"isChosenDestination"),t.isChosenDestination=!0):j.send("".concat(this.name," can't move into square (").concat(e.x,", ").concat(e.y,")"))}}]),t}(A),B=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).hp=100,n.maxHp=100,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isDead",get:function(){return this.hp<=0}}]),t}(w),T=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).bleeding=void 0,n.bleedingReductionPerTurn=1,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"bleed",value:function(){var e=0;return this.bleeding&&this.hp>0&&(e=this.bleeding,this.hp-=e,this.bleeding-=this.bleedingReductionPerTurn),e}},{key:"bleedExternally",value:function(){if(this.bleeding){var e=this.bleed(),t=K.getSquare(this.position.x,this.position.y);K.addBlood(t,e)}}}]),t}(B),F=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).isSupposedToBeBreathing=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isBreathing",get:function(){return this.hp>0&&this.isSupposedToBeBreathing},set:function(e){this.isSupposedToBeBreathing=e}}]),t}(B),P=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).targetPosition=void 0,n.isShooting=void 0,n.ceaseFire=void 0,n.hasWeapon=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"attackPosition",value:function(e){this.hasWeapon?(this.targetPosition=e,this.isShooting=!0):j.send("".concat(this.name," can't shoot - no weapon equipped"))}}]),t}(A),M=function(){function e(){Object(o.a)(this,e),this.inventory=void 0}return Object(s.a)(e,[{key:"takeFromInventory",value:function(e){var t=this.inventory.findIndex((function(t){return t.name==e}));return this.inventory.splice(t,1)[0]}},{key:"addToInventory",value:function(e){this.inventory||(this.inventory=[]),this.inventory.push(e)}}]),e}(),R=function e(){Object(o.a)(this,e),this.isFriendly=void 0,this.active=void 0;for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];Object.assign.apply(Object,[this].concat(n))};g=R,[A,w,B,T,D,F,P,M,function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).equipment=void 0,n.hasWeapon=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"equipInHands",value:function(e){this.unEquipFromHands();var t=this.takeFromInventory(e);this.equipment.hands=t,this.hasWeapon=t instanceof q}},{key:"unEquipFromHands",value:function(){this.equipment.hands&&(this.inventory.push(this.equipment.hands),this.equipment.hands=null,this.hasWeapon=!1)}}]),t}(M)].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){Object.defineProperty(g.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))}))}));var z=[{name:"John Rambo",age:40,hp:95,maxHp:100,icon:"\ud83d\ude20",isBreathing:!0,isFriendly:!0,position:{x:8,y:8},inventory:[{name:"KA-BAR"},new I],equipment:{head:"Red Bandana",hands:null}},{name:"Ellen Replay",age:30,hp:50,maxHp:65,icon:"\ud83d\udc69",isBreathing:!0,isFriendly:!0,position:{x:1,y:8},inventory:[new N,{name:"Motion Detector"}],equipment:{head:"Afro"}},{name:"Lazer Blady",age:60,hp:75,maxHp:100,icon:"\ud83e\uddd1\ud83c\udffb",isBreathing:!0,isFriendly:!0,position:{x:4,y:8},inventory:[new C,new I],equipment:{}},{name:"Lux Aeterna",age:20,hp:50,maxHp:50,icon:"\ud83d\udc71\u200d\u2640\ufe0f",isBreathing:!0,isFriendly:!0,position:{x:1,y:1},inventory:[new C],equipment:{}},{name:"Robot",age:1,hp:50,maxHp:50,icon:"\ud83e\udd16",isBreathing:!1,position:{x:4,y:5}},{name:"Octo",age:8,hp:200,maxHp:200,icon:"\ud83d\udc19",isBreathing:!0,position:{x:8,y:2},bleedingReductionPerTurn:0,bleeding:1},{name:"Squid",age:5,hp:100,maxHp:100,icon:"\ud83e\udd91",isBreathing:!0,position:{x:5,y:5}},{name:"Ant",age:1,hp:45,maxHp:50,icon:"\ud83d\udc1c",isBreathing:!0,position:{x:7,y:6}},{name:"Spider",age:1,hp:100,maxHp:150,icon:"\ud83d\udd77\ufe0f",isBreathing:!0,position:{x:9,y:3},bleedingReductionPerTurn:1},{name:"Mosquito",age:1,hp:12,maxHp:20,icon:"\ud83e\udd9f",isBreathing:!0,position:{x:2,y:7}},{name:"Microbe",age:1,hp:1,maxHp:5,icon:"\ud83e\udda0",isBreathing:!0,position:{x:3,y:5}}],H={box:{name:"box",icon:"\ud83d\udce6",hp:50,maxHp:70,isBreathing:!1,position:{x:4,y:5}},redBarrel:{name:"redBarrel",icon:"\ud83d\udee2\ufe0f",hp:50,maxHp:70,isBreathing:!1,position:{x:4,y:5}}},L=z.map((function(e){return new R(e)})),G=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).squareType="nothing",n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"addItem",value:function(e){this.addToInventory(e)}},{key:"items",get:function(){return this.inventory}}]),t}(M),J=new(function(){function e(){Object(o.a)(this,e),this.arenaSize=10,this.squares=[];for(var t=this.arenaSize*this.arenaSize;0!==t--;)this.initializeSquareIfEmpty(t)}return Object(s.a)(e,[{key:"getSquare",value:function(e,t){return this.squares[this.targetSquareIndex(e,t)]}},{key:"setSquare",value:function(e,t,n){this.squares[this.targetSquareIndex(e,t)]=n}},{key:"targetSquareIndex",value:function(e,t){return t*this.arenaSize+e}},{key:"targetSquarePosition",value:function(e){var t;return t=Math.floor(e/this.arenaSize),{x:e%this.arenaSize,y:t}}},{key:"setEntityWithinApropriateSquare",value:function(e){this.setEntityWithinASquare(e.position.x,e.position.y,e)}},{key:"setEntityWithinASquare",value:function(e,t,n){var a=this.targetSquareIndex(e,t);this.initializeSquareIfEmpty(a),this.squares[a].entity=n}},{key:"addBlood",value:function(e,t){e.blood?e.blood+=t:e.blood=t}},{key:"markSquareAsTargeted",value:function(e){h(this.squares,"isTargeted"),this.initializeSquareIfEmpty(e),this.squares[e].isTargeted=!0}},{key:"initializeSquareIfEmpty",value:function(e){this.squares[e]||(this.squares[e]=new G)}},{key:"markAvailableDestinationsForSelectedEntity",value:function(e){if(e.active){var t=e.position,n=t.x,a=t.y;h(this.squares,"isAvailableDestination");for(var i=a-1;i<=a+1;i++)if(!(i<0||i>=this.arenaSize))for(var r=n-1;r<=n+1;r++)if(!(r<0||r>=this.arenaSize||r===n&&i===a)){var o=this.getSquare(r,i);"floor"===o.squareType&&(o.isAvailableDestination=!0),this.setSquare(r,i,o)}}}},{key:"lightAllSquares",value:function(){this.squares.forEach((function(e){return e.isLit=!0}))}},{key:"castLightsFromFriendlyEntity",value:function(e){if(e.isFriendly){for(var t=e.position,n=t.x,a=t.y,i=a-2;i<=a+2;i++)if(!(i<0||i>=this.arenaSize))for(var r=n-2;r<=n+2;r++)if(!(r<0||r>=this.arenaSize)){var o=this.getSquare(r,i);o.isInTwilightZone=!0,this.setSquare(r,i,o)}for(var s=a-1;s<=a+1;s++)if(!(s<0||s>=this.arenaSize))for(var c=n-1;c<=n+1;c++)if(!(c<0||c>=this.arenaSize)){var l=this.getSquare(c,s);l.isLit=!0,this.setSquare(c,s,l)}}}}]),e}()),W=new(function(){function e(){Object(o.a)(this,e),this.entities=void 0,this.selected=void 0}return Object(s.a)(e,[{key:"getEntityId",value:function(e){return e.name}},{key:"findEntityById",value:function(e){return this.entities.filter((function(t){return t.name===e}))[0]}},{key:"findItemOnEntity",value:function(e,t){return e.inventory.filter((function(e){return e.name===t}))[0]}},{key:"moveEntityRandomly",value:function(e){if(!e.isDead){var t=e.position.x,n=e.position.y;e.position.x=e.position.x+m(-1,1),e.position.y=e.position.y+m(-1,1),e.position.x=d(e.position.x,0,9),e.position.y=d(e.position.y,0,9);var a=J.getSquare(e.position.x,e.position.y);(a&&a.entity||a&&"floor"!==a.squareType)&&(e.position.x=t,e.position.y=n)}}},{key:"stopBreathingForKilledEntity",value:function(e){return e&&e.hp<=0&&(e.isBreathing=!1,e.hp=0),e}},{key:"getEntitiesAtGivenPosition",value:function(e){return this.entities.filter((function(t){return t.position.x===e.x&&t.position.y===e.y}))}},{key:"selectEntityFromGivenSquare",value:function(e,t){return e&&t&&t.entity&&(e.active=!1),t&&t.entity&&((e=t.entity).active=!0),e}},{key:"setSelected",value:function(e,t){var n=this.findEntityById(this.getEntityId(e));return t?e.active=t:(e=null,console.log("Nullified:",e)),n.active=t,e}},{key:"checkAmmoAndCalculateDamageApplied",value:function(e){var t=0,n=e.equipment&&e.equipment.hands;return n?(n.isAbleToFire?t=n.fire():(n.rounds="empty",e.isShooting=!1),t):0}},{key:"fireAShot",value:function(e){var t=this;if(e.ceaseFire)return e.isShooting=!1,void(e.ceaseFire=!1);var n=this.checkAmmoAndCalculateDamageApplied(e);this.getEntitiesAtGivenPosition(e.targetPosition).forEach((function(a){t.applyDamageToTargetEntity(a,n),t.ceaseFireNextTickIfTargetIsKilled(e,a)}))}},{key:"applyDamageToTargetEntity",value:function(e,t){t&&(e.hp-=t,e.bleeding=5)}},{key:"ceaseFireNextTickIfTargetIsKilled",value:function(e,t){t.hp<0&&(e.ceaseFire=!0)}},{key:"isEntityShootingProperly",value:function(e){return e.isShooting&&e.targetPosition&&(e.targetPosition.x!==e.position.x||e.targetPosition.y!==e.position.y)}},{key:"applyEffectsOfBleeding",value:function(e){if(e.bleeding&&e.hp>0){e.hp-=e.bleeding;var t=J.getSquare(e.position.x,e.position.y);J.addBlood(t,e.bleeding),e.bleeding-=e.bleedingReductionPerTurn}return e}},{key:"moveEntityIntoChosenDestination",value:function(e){if(!e.isDead&&e.moveDestination){var t=J.getSquare(e.moveDestination.x,e.moveDestination.y);e.position=e.moveDestination,delete e.moveDestination,t.isChosenDestination=void 0}return e}},{key:"setMoveDestinationOnASelectedEntity",value:function(e,t){e.moveDestination=t}},{key:"moveEntities",value:function(){var e=this;this.entities.forEach((function(t){return e.moveEntityIntoChosenDestination(t)}));var t=this.findEntityById("John Rambo"),n=this.findEntityById("Squid"),a=this.findEntityById("Octo");this.moveEntityRandomly(t),this.moveEntityRandomly(n),this.moveEntityRandomly(a)}}]),e}()),K=J;function Z(e){var t=e.entity,n=f,a=t.targetPosition,r=5,o=[],s="Entity".concat(t.icon),c="";if(a&&t.position&&t.hasWeapon&&t.isShooting&&(t.targetPosition.x!==t.position.x||t.targetPosition.y!==t.position.y)&&a){var l=38*(a.x-t.position.x),u=38*(a.y-t.position.y),p=y(l,u),h=t&&t.equipment&&t.equipment.hands&&t.equipment.hands.type,d=n(l,u);if("lazer"===h){var m="projectile".concat(s,"_beam");c="\n          @keyframes pulsing".concat(s," {\n            0%  {opacity: 0.1;}\n            100%  {opacity: 1;}\n          }\n\n          @keyframes elongating").concat(s," {\n            0%  {width: ").concat(p-20,";}\n            100%  {width: ").concat(p+20,";}\n          }\n\n          @keyframes swiping").concat(s," {\n            0%  {transform: rotate(").concat(d+90+-1,"deg);}\n            50%  {transform: rotate(").concat(d+90+1,"deg);}\n            100%  {transform: rotate(").concat(d+90-1,"deg);}\n          }\n\n          .").concat(m," {\n            width: ").concat(p,"px;\n            height: 3px;\n            border-radius: 5px;\n            background: #F00;\n            position: absolute;\n            top: 16px;\n            left: 16px;\n\n            transform: rotate(").concat(d+90,"deg);\n            transform-origin: left 0px;\n            animation: pulsing").concat(s," 0.1s linear infinite,\n            elongating").concat(s," 1s linear alternate infinite,\n            swiping").concat(s," 1s linear alternate infinite;\n            box-shadow: 0 0 5px 5px white;\n            z-index: 10;\n          }\n          "),o.push(i.a.createElement("div",{key:m,className:m},""))}else{for(c="\n          @keyframes shooting".concat(s," {\n            0%   {transform: translate(0,0) rotate(").concat(d,"deg) scaleY(0.3)}\n            100% {transform: translate(\n              ").concat(36*(a.x-t.position.x),"px,\n              ").concat(36*(a.y-t.position.y),"px\n            ) rotate(").concat(d,"deg) scaleY(2)}\n          }\n          ");r--;)c+="\n          .projectile".concat(s,"_").concat(r," {\n            transform: rotate(").concat(d,"deg);\n            animation: shooting").concat(s," 0.8s linear infinite;\n            animation-delay: ").concat(r-.3,"s;\n          }");var v=t.isShooting?"|":"";for(r=3;r--;){var b="projectile projectile".concat(s,"_").concat(r);o.push(i.a.createElement("div",{key:b,className:b},v))}}}return i.a.createElement("div",{className:"shooting-visualization"},i.a.createElement("style",null,c),o)}n(17);var U=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).randomTime="".concat((Math.random()+.5).toFixed(2),"s"),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.entity,t=K.getSquare(e.position.x,e.position.y),n="".concat("entity-pawn__icon"),a=b(e,"entity-pawn__icon");a+=b(t,"entity-pawn__icon"),n+=" ".concat(a," ");var r=e.isBreathing?"breathing ".concat(this.randomTime," alternate infinite linear"):"none";return i.a.createElement("div",{className:"entity-pawn",key:e.name,style:{left:15+38*e.position.x,top:15+38*e.position.y}},i.a.createElement("div",{className:n,style:{animation:r}},e.icon),i.a.createElement(Z,{entity:e}))}}]),t}(i.a.Component),Y=n(8),Q=n.n(Y),V=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).renderEntityPawns=function(){return n.props.entities.map((function(e){return i.a.createElement(U,{entity:e})}))},n.handleClick=n.handleClick.bind(Object(p.a)(n)),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){console.log("Handles Click on Board",e),this.props.onClick(e)}},{key:"renderSquare",value:function(e,t,n){var a=this.props.squares[e],r=this.props.squares[e]&&this.props.squares[e].entity||{};return i.a.createElement(O,{key:e,squareId:e+"",onClick:this.handleClick,active:r.active,isDead:r.isDead,blood:a.blood,items:a.items,itemsLength:a.items&&a.items.length,isLit:a.isLit,squareType:a.squareType,isInTwilightZone:a.isInTwilightZone,isAvailableDestination:a.isAvailableDestination,isChosenDestination:a.isChosenDestination,isTargeted:a.isTargeted})}},{key:"render",value:function(){var e,t=this,n=0,a=0,r=Array(this.props.size).fill(null).map((function(r,o){e=0;var s=Array(t.props.size).fill(null).map((function(i,r){return t.renderSquare(n++,a,e++)}));return i.a.createElement("div",{key:a++,className:Q.a.board__row},s)})),o=this.renderEntityPawns(),s=Q.a.board;return this.props.isRotated&&(s+=" ".concat(Q.a["board--rotated"])),i.a.createElement("div",{className:s},r,o)}}]),t}(i.a.PureComponent);n(18);function X(e){var t="linear-display ".concat(e.className||""),n=~~(100*e.current/e.max),a=n>100;a&&(n=100,t+=" linear-display--overloaded");var r={width:"".concat(n,"%")},o=e.title||"".concat(e.current,"/").concat(e.max),s=e.current,c=1;e.max>=40&&e.max<100?c=5:e.max>=100&&(c=10);var l={backgroundSize:"".concat(100/(s/=c),"% 100%"),backgroundImage:"\n      linear-gradient(to left, ".concat("black"," 1px, transparent 1px)\n    ")};return Object.assign(r,l),i.a.createElement("div",{className:t},i.a.createElement("div",{className:"linear-display__label"},e.label,":\xa0"),i.a.createElement("div",{className:"linear-display__bar-container",title:o},i.a.createElement("div",{className:"linear-display__bar-progress",style:r},i.a.createElement("span",{className:"linear-display__bar-progress-text"},e.current,a?"/"+e.max:"","\xa0"))),i.a.createElement("div",null,"\xa0"))}n(19);function $(e){var t,n,a,r=e.item;if(e.onDrop&&(n=i.a.createElement("button",{className:"inventory-list__drop-button",onClick:function(){e.onDrop(r.name)}},"Drop")),r instanceof _){var o=r;if(o.reload){var s=" inventory-list__reload-button ";0===o.rounds||"empty"===o.rounds?s+=" inventory-list__reload-button--empty ":o.rounds<o.maxRounds&&(s+=" inventory-list__reload-button--partial "),t=i.a.createElement("button",{className:s,onClick:function(){o.reload(),e.processInterface()}},"Reload")}else t=null;a=o.reload?i.a.createElement(X,{label:"Rounds",current:o.rounds,max:o.maxRounds}):null}return i.a.createElement("div",{key:r.name},i.a.createElement("div",{onClick:function(){return e.onClick(r.name)},key:r.name,className:"inventory-list__item"},i.a.createElement("span",null,r.name),i.a.createElement("div",null,a)),t,n)}function ee(e){var t="inventory-list ".concat(e.className||"");if(!e.inventory)return null;var n=e.inventory.map((function(t){return i.a.createElement($,{item:t,onClick:e.onClick,onDrop:e.onDrop,processInterface:e.processInterface})}));return i.a.createElement("div",{className:t},i.a.createElement("div",{className:"inventory-list__label"},e.label,":\xa0"),i.a.createElement("div",{className:"inventory-list__items",title:e.title},n))}n(20);var te=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).renderCount=0,n.handleInventoryClick=function(e){n.props.onInventoryClick(n.props.entity,e)},n.onDrop=function(e){var t=n.props.entity;t.equipment.hands&&t.equipment.hands.name==e&&(t.unEquipFromHands(),t.isShooting=!1);var a=t.takeFromInventory(e);t.square.addItem(a),n.props.processInterface()},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.entity;if(!t)return null;var n="entity-card";t.active&&(n+=" entity-card--active"),t.isFriendly&&(n+=" entity-card--friendly"),t.isDead&&(n+=" entity-card--dead");var a=t.equipment&&t.equipment.hands,r=a&&[a];return i.a.createElement("div",{className:n},i.a.createElement("div",null,i.a.createElement("div",{className:"entity-card__position",title:"Position"},i.a.createElement("span",null," ",t.position.x," ",t.position.y," ")),i.a.createElement("div",{className:"entity-card__portrait"},t.icon)),i.a.createElement("strong",{title:"Name"},t.name),i.a.createElement("br",null),i.a.createElement("div",{style:{clear:"both",display:"inline-block",textAlign:"right"}},i.a.createElement(X,{label:"HP",current:t.hp,max:t.maxHp}),i.a.createElement("br",null)),i.a.createElement(ee,{label:"Equipped",title:"In hands",onClick:this.handleInventoryClick,onDrop:this.onDrop,inventory:r,processInterface:function(){return e.props.processInterface()}}),i.a.createElement(ee,{label:"Inventory",title:"In backpack",onClick:this.handleInventoryClick,onDrop:this.onDrop,inventory:t.inventory,processInterface:function(){return e.props.processInterface()}}))}}]),t}(i.a.Component),ne=(n(21),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).renderCounter=0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.entities.filter((function(e){return e.isFriendly})).map((function(t){return i.a.createElement(te,{onInventoryClick:e.props.onInventoryClick,entity:t,key:t.name,processInterface:function(){return e.props.processInterface()}})})),n=this.props.entities.filter((function(e){return!e.isFriendly})).map((function(t){return i.a.createElement(te,{entity:t,key:t.name,processInterface:function(){return e.props.processInterface()}})}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",{className:"entities-list__header"},"List of Entities:"),i.a.createElement("div",{className:"entities-list"},t),i.a.createElement("div",{className:"entities-list"},n))}}]),t}(i.a.Component)),ae=n(6),ie=n.n(ae),re=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).boxSerialNumber=0,n.onItemClick=function(e){var t=n.props,a=t.selected,i=t.targeted;if(v(a,i)){var r=i.takeFromInventory(e);a.addToInventory(r)}n.props.processInterface()},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onMoveClick",value:function(e,t){var n=K.getSquare(t.x,t.y);e.setMoveDestinationPosition(t),n.isChosenDestination=!0,this.props.processInterface()}},{key:"onAttackClick",value:function(e,t){e.attackPosition(t),this.props.processInterface()}},{key:"onAddStructureClick",value:function(e,t){var n=Object.assign({},H[t]),a=Object.assign({},e);n.position=a,n.name+=this.boxSerialNumber++;var i=new R(n),r=K.getSquare(e.x,e.y);r.entity=i,r.addToInventory(i),this.props.processInterface()}},{key:"render",value:function(){var e=this,t=this.props,n=t.targeted,a=t.selected,r=t.squareNumber;if(!n)return null;var o,s,c,l,u,p=K.targetSquarePosition(r),h=[],d=i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.onAddStructureClick(p,"box")},className:ie.a.button},"Add box"),i.a.createElement("button",{onClick:function(){return e.onAddStructureClick(p,"redBarrel")},className:ie.a.button},"Add barrel"));if(n.entity&&!v(a,n)&&(o=i.a.createElement(te,{onInventoryClick:this.props.onInventoryClick,entity:n.entity,processInterface:function(){return e.props.processInterface()}})),n.items&&(u=i.a.createElement(ee,{label:"Items in this location",title:"On the floor",onClick:this.onItemClick,onDrop:null,inventory:n.items,processInterface:function(){return e.props.processInterface()}})),a){var m=y(p.x-a.position.x,p.y-a.position.y);s=i.a.createElement("li",null,"Distance to selected: ",m.toFixed(2)),0!==m&&(n.isAvailableDestination&&(h[0]=i.a.createElement("button",{onClick:function(){return e.onMoveClick(a,p)},className:ie.a.button},"Move")),n.entity&&(h[1]=i.a.createElement("button",{onClick:function(){return e.onAttackClick(a,p)},className:ie.a.button},"Attack")))}return p&&(c=i.a.createElement("li",null,"Position: [ ",p.x,", ",p.y," ]"," ")),n.blood&&(l=i.a.createElement("li",null,"Blood amount: ",n.blood)),i.a.createElement("div",{className:this.props.className},i.a.createElement("strong",{className:ie.a.targeted__label},"Target square Info"),i.a.createElement("div",null,o),i.a.createElement("div",null,h),i.a.createElement("ul",null,c,s,l,u,d))}}]),t}(i.a.Component),oe=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.selected?i.a.createElement("div",{className:ie.a.selected},i.a.createElement("strong",{className:ie.a.selected__label},"Selected entity "),i.a.createElement("div",null,i.a.createElement(te,{onInventoryClick:this.props.onInventoryClick,entity:this.props.selected,processInterface:function(){return e.props.processInterface()}})),i.a.createElement("button",{onClick:this.props.handleDeselectAllEntities,className:ie.a.button}," ","Deselect")):null}}]),t}(i.a.Component),se=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).messages=j.messages,n.messageNumber=void 0,n.renderMessage=function(e,t){return i.a.createElement("li",null,"Message #[",t,"]: ",e)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(){return this.messages.length!=this.messageNumber}},{key:"render",value:function(){var e=this;if(!this.messages.length)return null;var t=this.messages.map((function(t,n){return e.renderMessage(t,n)}));return this.messageNumber=this.messages.length,i.a.createElement("ul",{className:"messages",id:"messages"},t)}},{key:"scrollElement",value:function(){window.requestAnimationFrame((function(){var e=document.getElementById("messages");e.scrollTop=e.scrollHeight}))}},{key:"componentDidUpdate",value:function(){this.messages.length&&this.scrollElement()}}]),t}(i.a.Component),ce=new(function(){function e(t){Object(o.a)(this,e),this.entities=void 0,this.entities=t}return Object(s.a)(e,[{key:"access",value:function(){console.log("Accessing Game Model"),console.log(this.entities)}}]),e}())(L),le=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).renderCounter=0,n.stepNumber=0,n.toggleEditorMode=function(){n.state.isEditorOn?n.setState((function(e){return{squares:K.squares,entities:W.entities,isEditorOn:!1}})):(h(n.state.squares,"blood","entity"),n.setState((function(e){return{entities:[],isEditorOn:!0}})))},n.loop=function(){n.stepNumber++,n.processEntities(),n.state.autoLoop&&setTimeout(n.loop,1e3)},n.nextTick=function(){n.setState({autoLoop:!1}),n.loop()},n.newHandleClick=function(e){n.setState((function(t){var a=t.squares,i=t.entities,r=t.selected,o=t.targeted,s=t.isEditorOn,c=t.targetedSquareNumber,l=o;o=a[e],c=e;var u=function(){return l===o};if(K.markSquareAsTargeted(e),s)switch(o.squareType){case"floor":o.squareType="wall";break;case"wall":o.squareType="nothing";break;case"nothing":default:o.squareType="floor"}return u()&&o.isAvailableDestination&&r.setMoveDestinationSquare(e),(u()||r)&&(!r&&o.entity?r=W.selectEntityFromGivenSquare(r,o):v(r,o)&&(n.deselectAllEntities(),r=void 0)),u()&&r&&o.entity&&r!==o.entity&&r.attackPosition(K.targetSquarePosition(e)),{squares:a,entities:i,selected:r,targeted:o,targetedSquareNumber:c}}),n.processInterface)},n.nuke=function(e){n.setState((function(t){var n=t.entities;return n.forEach((function(t){t.hp=t.hp-e})),{entities:n}}),(function(){n.processEntities()}))},n.toggleRotateBoard=function(){n.setState({isBoardRotated:!n.state.isBoardRotated})},n.switchAutoLoop=function(){n.setState((function(e){return{autoLoop:!e.autoLoop}}),(function(){n.state.autoLoop&&n.loop()}))},n.onInventoryClick=function(e,t){n.setState((function(n){var a=[].concat(n.entities);W.entities=a;var i=W.getEntityId(e),r=W.findEntityById(i);W.findItemOnEntity(r,t);return r.equipment.hands&&r.equipment.hands.name==t?r.unEquipFromHands():r.equipInHands(t),{entities:a}})),console.log(e,t)},n.handleDeselectAllEntities=function(){n.setState((function(e){var t=e.squares,a=e.entities;e.selected;return n.deselectAllEntities(),void 0,{squares:t,entities:a,selected:void 0}}),(function(){}))},n.deselectAllEntities=function(){h(W.entities,"active"),h(K.squares,"isChosenDestination","isAvailableDestination")},n.ceaseFire=function(){n.setState((function(e){var t=e.squares,n=e.entities,a=e.selected;return h(n,"isShooting"),{squares:t,entities:n,selected:a}}),(function(){n.processInterface()}))},n.saveMap=function(){var e=JSON.parse(JSON.stringify(K.squares)).map((function(e){return e})),t=JSON.stringify(e);console.log(t);var n=window.prompt("Enter the name of saved map.","map00");localStorage[n]=t},n.loadMap=function(){var e=Object.keys(localStorage),t="Enter the name of map to load. ".concat(e),n=window.prompt(t,"map00"),a=localStorage[n];console.log(a);var i=JSON.parse(a);K.squares.forEach((function(e,t){var n=e,a=i[t];n.squareType=a.squareType}))},n.state={entities:ce.entities,squares:K.squares,selected:null,targeted:null,targetedSquareNumber:null,arenaSize:10,autoLoop:!0,isBoardRotated:!1,isEditorOn:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){W.entities=this.state.entities,this.loop()}},{key:"processEntities",value:function(){var e=this;this.setState((function(t){return e.calculateNextGameState(t)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"calculateNextGameState",value:function(e){var t=e,n=t.entities;t.squares,t.selected;return W.moveEntities(),n.forEach((function(e){W.isEntityShootingProperly(e)&&W.fireAShot(e),e.bleedExternally(),W.stopBreathingForKilledEntity(e),K.markAvailableDestinationsForSelectedEntity(e)})),t}},{key:"processInterface",value:function(){var e=this;this.setState((function(t){return e.calculateNextInterfaceState(t)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"calculateNextInterfaceState",value:function(e){var t=e,n=t.entities,a=t.selected;return n.forEach((function(e){e==a&&K.markAvailableDestinationsForSelectedEntity(a)})),t}},{key:"setSquaresAccordingToEntities",value:function(){this.setState((function(e){var t,n=(t=e.squares,[].concat(t));K.squares=n;var a=e.entities;return a.length&&h(n,"entity"),a.forEach((function(e){K.setEntityWithinApropriateSquare(e)})),{squares:n}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:ie.a.game},i.a.createElement("div",{className:ie.a.game__board},i.a.createElement(V,{squares:this.state.squares,entities:this.state.entities,onClick:function(t){return e.newHandleClick(t)},size:this.state.arenaSize,isRotated:this.state.isBoardRotated})),i.a.createElement("div",{className:ie.a.game__info},i.a.createElement("div",{className:ie.a.actions},i.a.createElement("button",{onClick:this.toggleEditorMode,className:ie.a.button},"Editor Mode"),i.a.createElement("button",{onClick:this.saveMap,className:ie.a.button},"Save Map"),i.a.createElement("button",{onClick:this.loadMap,className:ie.a.button},"Load Map"),i.a.createElement("button",{onClick:function(){e.nuke(40)},className:"".concat(ie.a.button," ").concat(ie.a["button-nuke"])},"Nuke All"),i.a.createElement("button",{onClick:this.ceaseFire,className:ie.a.button},"Cease Fire"),i.a.createElement("button",{onClick:this.toggleRotateBoard,className:ie.a.button},"Rotate Board"),i.a.createElement("button",{onClick:this.nextTick,className:ie.a.button},"Next Tick"),i.a.createElement("span",{className:ie.a["step-counter"]},"Tick: ",this.stepNumber),i.a.createElement("label",{className:" ".concat(ie.a.button," ").concat(ie.a["auto-cycle"])},i.a.createElement("input",{type:"checkbox",checked:this.state.autoLoop,onChange:this.switchAutoLoop}),i.a.createElement("span",null,"Auto Cycle"))),i.a.createElement("div",{className:ie.a["interaction-container"]},i.a.createElement(oe,{selected:this.state.selected,handleDeselectAllEntities:this.handleDeselectAllEntities,onInventoryClick:this.onInventoryClick,processInterface:function(){return e.processInterface()}}),i.a.createElement(re,{className:ie.a.targeted,squareNumber:this.state.targetedSquareNumber,squares:this.state.squares,selected:this.state.selected,targeted:this.state.targeted,onInventoryClick:this.onInventoryClick,processInterface:function(){return e.processInterface()}}),i.a.createElement("div",null)),i.a.createElement(se,null)),i.a.createElement("div",{className:ie.a.game__list},i.a.createElement(ne,{entities:this.state.entities,onInventoryClick:this.onInventoryClick,processInterface:function(){return e.processInterface()}})))}}]),t}(i.a.PureComponent);n(22);Object(r.render)(i.a.createElement(le,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.09ff3904.chunk.js.map