(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],[,,,function(e,t,n){"use strict";var a=n(10);n.d(t,"EntitiesService",(function(){return a.d})),n.d(t,"Entity",(function(){return a.e}));var i=n(9);n.d(t,"SquaresService",(function(){return i.a}));var r=n(21);n.d(t,"Lazer",(function(){return r.a})),n.d(t,"RangedWeapon",(function(){return r.b})),n.d(t,"Rifle",(function(){return r.c})),n.d(t,"Weapon",(function(){return r.d}));var o=n(22);n.d(t,"MessageService",(function(){return o.a}));var s=n(18);n.o(s,"GameActionsClass")&&n.d(t,"GameActionsClass",(function(){return s.GameActionsClass})),n.o(s,"GameLogic")&&n.d(t,"GameLogic",(function(){return s.GameLogic})),n.o(s,"GameModel")&&n.d(t,"GameModel",(function(){return s.GameModel}));var c=n(14);n.d(t,"GameModel",(function(){return c.a}));var u=n(23);n.d(t,"GameActionsClass",(function(){return u.a}))},,,,function(e,t,n){e.exports={game:"Game_game__229bL",game__board:"Game_game__board__1KMto",game__info:"Game_game__info__3kjt8",game__list:"Game_game__list__yMHF0",status:"Game_status__21KP9",button:"Game_button__1_Ze4","button-nuke":"Game_button-nuke__xGjPs",actions:"Game_actions__2-VcJ","interaction-container":"Game_interaction-container__3RZ7s",selected:"Game_selected__ZRNAo",targeted:"Game_targeted__3gJqr",selected__label:"Game_selected__label__2d30g",targeted__label:"Game_targeted__label__328kg","step-counter":"Game_step-counter__hrmzE","auto-cycle":"Game_auto-cycle__1cp6W","kbd-navigation":"Game_kbd-navigation__10pCT",square:"Game_square__3r5qO"}},function(e,t,n){"use strict";var a=n(12);n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.c})),n.d(t,"d",(function(){return a.d})),n.d(t,"e",(function(){return a.g})),n.d(t,"f",(function(){return a.h})),n.d(t,"g",(function(){return a.i})),n.d(t,"h",(function(){return a.j}))},function(e,t,n){"use strict";var a=n(1),i=n(2),r=n(12),o=n(5),s=n(4),c=n(6),u=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).squareType="nothing",n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"addItem",value:function(e){this.addToInventory(e)}},{key:"items",get:function(){return this.inventory}}]),t}(n(10).g),l=new(function(){function e(){Object(a.a)(this,e),this.arenaSize=10,this.squares=[];for(var t=this.arenaSize*this.arenaSize;0!==t--;)this.initializeSquareIfEmpty(t)}return Object(i.a)(e,[{key:"getSquare",value:function(e,t){return this.squares[this.targetSquareIndex(e,t)]}},{key:"setSquare",value:function(e,t,n){this.squares[this.targetSquareIndex(e,t)]=n}},{key:"targetSquareIndex",value:function(e,t){return t*this.arenaSize+e}},{key:"targetSquarePosition",value:function(e){var t;return t=Math.floor(e/this.arenaSize),{x:e%this.arenaSize,y:t}}},{key:"setEntityWithinApropriateSquare",value:function(e){this.setEntityWithinASquare(e.position.x,e.position.y,e)}},{key:"setEntityWithinASquare",value:function(e,t,n){var a=this.targetSquareIndex(e,t);this.initializeSquareIfEmpty(a),this.squares[a].entity=n}},{key:"addBlood",value:function(e,t){e.blood?e.blood+=t:e.blood=t}},{key:"markSquareAsTargeted",value:function(e){r.i(this.squares,"isTargeted"),this.initializeSquareIfEmpty(e),this.squares[e].isTargeted=!0}},{key:"initializeSquareIfEmpty",value:function(e){this.squares[e]||(this.squares[e]=new u)}},{key:"markAvailableDestinationsForSelectedEntity",value:function(e){if(e.active){var t=e.position,n=t.x,a=t.y;r.i(this.squares,"isAvailableDestination");for(var i=a-1;i<=a+1;i++)if(!(i<0||i>=this.arenaSize))for(var o=n-1;o<=n+1;o++)if(!(o<0||o>=this.arenaSize||o===n&&i===a)){var s=this.getSquare(o,i);"floor"===s.squareType&&(s.isAvailableDestination=!0),this.setSquare(o,i,s)}}}},{key:"lightAllSquares",value:function(){this.squares.forEach((function(e){return e.isLit=!0}))}},{key:"castLightsFromFriendlyEntity",value:function(e){if(e.isFriendly){for(var t=e.position,n=t.x,a=t.y,i=a-2;i<=a+2;i++)if(!(i<0||i>=this.arenaSize))for(var r=n-2;r<=n+2;r++)if(!(r<0||r>=this.arenaSize)){var o=this.getSquare(r,i);o.isInTwilightZone=!0,this.setSquare(r,i,o)}for(var s=a-1;s<=a+1;s++)if(!(s<0||s>=this.arenaSize))for(var c=n-1;c<=n+1;c++)if(!(c<0||c>=this.arenaSize)){var u=this.getSquare(c,s);u.isLit=!0,this.setSquare(c,s,u)}}}}]),e}());n.d(t,"a",(function(){return l}))},function(e,t,n){"use strict";var a=n(5),i=n(4),r=n(6),o=n(2),s=n(1),c=n(3),u=n(8),l=function e(){Object(s.a)(this,e),this.name="An Entity",this.icon="E"},p=function(){function e(){Object(s.a)(this,e),this.position={x:void 0,y:void 0}}return Object(o.a)(e,[{key:"square",get:function(){return c.SquaresService.getSquare(this.position.x,this.position.y)}}]),e}(),d=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).moveDestination=void 0,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"setMoveDestinationSquare",value:function(e){this.setMoveDestinationPosition(c.SquaresService.targetSquarePosition(e))}},{key:"setMoveDestinationPosition",value:function(e){var t=c.SquaresService.getSquare(e.x,e.y);!t.entity||t.entity.isDead?(this.moveDestination=e,u.g(c.SquaresService.squares,"isChosenDestination"),t.isChosenDestination=!0):c.MessageService.send("".concat(this.name," can't move into square (").concat(e.x,", ").concat(e.y,")"))}}]),t}(l),h=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).hp=100,n.maxHp=100,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"isDead",get:function(){return this.hp<=0}},{key:"isAlive",get:function(){return this.hp>0}}]),t}(p),m=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).bleeding=void 0,n.bleedingReductionPerTurn=1,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"bleed",value:function(){var e=0;return this.bleeding&&this.isAlive&&(e=this.bleeding,this.hp-=e,this.bleeding-=this.bleedingReductionPerTurn),e}},{key:"bleedExternally",value:function(){if(this.bleeding){var e=this.bleed(),t=c.SquaresService.getSquare(this.position.x,this.position.y);c.SquaresService.addBlood(t,e)}}}]),t}(h),f=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).isSupposedToBeBreathing=void 0,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"isBreathing",get:function(){return this.isAlive&&this.isSupposedToBeBreathing},set:function(e){this.isSupposedToBeBreathing=e}}]),t}(h),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).targetPosition=void 0,n.isShooting=void 0,n.ceaseFire=void 0,n.hasWeapon=void 0,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"attackPosition",value:function(e){this.hasWeapon?(this.targetPosition=e,this.isShooting=!0):c.MessageService.send("".concat(this.name," can't shoot - no weapon equipped"))}}]),t}(l),v=function(){function e(){Object(s.a)(this,e),this.inventory=void 0}return Object(o.a)(e,[{key:"takeFromInventory",value:function(e){var t=this.inventory.findIndex((function(t){return t.name===e}));return this.inventory.splice(t,1)[0]}},{key:"addToInventory",value:function(e){this.inventory||(this.inventory=[]),this.inventory.push(e)}}]),e}(),g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).equipment=void 0,n.hasWeapon=void 0,n}return Object(r.a)(t,e),Object(o.a)(t,[{key:"equipInHands",value:function(e){this.unEquipFromHands();var t=this.takeFromInventory(e);this.equipment.hands=t,t instanceof c.Weapon?this.hasWeapon=!0:this.hasWeapon=!1}},{key:"unEquipFromHands",value:function(){this.equipment.hands&&(this.inventory.push(this.equipment.hands),this.equipment.hands=null,this.hasWeapon=!1)}}]),t}(v),b=function e(){Object(s.a)(this,e),this.isFriendly=void 0,this.active=void 0;for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];Object.assign.apply(Object,[this].concat(n))};Object(u.a)(b,[l,p,h,m,d,f,y,v,g]);var q=n(9),E=n(12),k=new(function(){function e(){Object(s.a)(this,e),this.entities=void 0,this.selected=void 0}return Object(o.a)(e,[{key:"getEntityId",value:function(e){return e.name}},{key:"findEntityById",value:function(e){return this.entities.filter((function(t){return t.name===e}))[0]}},{key:"findItemOnEntity",value:function(e,t){return e.inventory.filter((function(e){return e.name===t}))[0]}},{key:"moveEntityRandomly",value:function(e){if(!e.isDead){var t=e.position.x,n=e.position.y;e.position.x=e.position.x+E.f(-1,1),e.position.y=e.position.y+E.f(-1,1),e.position.x=E.e(e.position.x,0,9),e.position.y=E.e(e.position.y,0,9);var a=q.a.getSquare(e.position.x,e.position.y);(a&&a.entity||a&&"floor"!==a.squareType)&&(e.position.x=t,e.position.y=n)}}},{key:"stopBreathingForKilledEntity",value:function(e){return e&&e.hp<=0&&(e.isBreathing=!1,e.isShooting=!1,e.hp=0),e}},{key:"getEntitiesAtGivenPosition",value:function(e){return this.entities.filter((function(t){return t.position.x===e.x&&t.position.y===e.y}))}},{key:"selectEntityFromGivenSquare",value:function(e,t){return e&&t&&t.entity&&(e.active=!1),t&&t.entity&&((e=t.entity).active=!0),e}},{key:"setSelected",value:function(e,t){var n=this.findEntityById(this.getEntityId(e));return t?e.active=t:(e=null,console.log("Nullified:",e)),n.active=t,e}},{key:"checkAmmoAndCalculateDamageApplied",value:function(e){var t=0,n=e.equipment&&e.equipment.hands;return n?(n.isAbleToFire?t=n.fire():(n.rounds="empty",e.isShooting=!1),t):0}},{key:"fireAShot",value:function(e){var t=this;if(e.ceaseFire)return e.isShooting=!1,void(e.ceaseFire=!1);var n=this.checkAmmoAndCalculateDamageApplied(e);this.getEntitiesAtGivenPosition(e.targetPosition).forEach((function(a){t.applyDamageToTargetEntity(a,n),t.ceaseFireNextTickIfTargetIsKilled(e,a)}))}},{key:"applyDamageToTargetEntity",value:function(e,t){t&&(e.hp-=t,e.bleeding=5)}},{key:"ceaseFireNextTickIfTargetIsKilled",value:function(e,t){t.hp<0&&(e.ceaseFire=!0)}},{key:"isEntityShootingProperly",value:function(e){return e.isShooting&&e.targetPosition&&(e.targetPosition.x!==e.position.x||e.targetPosition.y!==e.position.y)}},{key:"applyEffectsOfBleeding",value:function(e){if(e.bleeding&&e.hp>0){e.hp-=e.bleeding;var t=q.a.getSquare(e.position.x,e.position.y);q.a.addBlood(t,e.bleeding),e.bleeding-=e.bleedingReductionPerTurn}return e}},{key:"moveEntityIntoChosenDestination",value:function(e){if(!e.isDead&&e.moveDestination){var t=q.a.getSquare(e.moveDestination.x,e.moveDestination.y);e.position=e.moveDestination,delete e.moveDestination,t.isChosenDestination=void 0}return e}},{key:"setMoveDestinationOnASelectedEntity",value:function(e,t){e.moveDestination=t}},{key:"moveEntities",value:function(){var e=this;this.entities.forEach((function(t){return e.moveEntityIntoChosenDestination(t)})),this.entities.filter((function(e){return!e.isFriendly})).forEach((function(t){e.moveEntityRandomly(t)}))}}]),e}());n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return k}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(1),i=n(5),r=n(4),o=n(6),s=n(3),c=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).name="M16",n.rounds=15,n.maxRounds=20,n.damage=2,n}return Object(o.a)(t,e),t}(s.Rifle),u=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).name="M41A Pulse Rifle",n.rounds=40,n.maxRounds=40,n.damage=1,n}return Object(o.a)(t,e),t}(s.Rifle),l=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).name="Assault Lazer Cannon",n.rounds=30,n.maxRounds=30,n.damage=3,n}return Object(o.a)(t,e),t}(s.Lazer)},function(e,t,n){"use strict";function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];e.forEach((function(e){n.forEach((function(t){e&&(e[t]=void 0)}))}))}function i(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}function o(e,t){var n;return t>=0?n=-Math.atan(e/t)*(180/Math.PI):t<0&&(n=180/Math.PI*(Math.atan(e/-t)+Math.PI)),n}function s(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function c(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))}))}function u(e,t){return!!(e&&t&&t.entity&&e.name===t.entity.name)}function l(e,t){if(!e)return"";var n={active:"active",isAvailableDestination:"is-available-destination",isChosenDestination:"is-chosen-destination",isBreathing:"breathing",isDead:"dead",isShooting:"shooting",isTargeted:"targeted",isLit:"is-lit",isInTwilightZone:"is-in-twilight-zone"},a="";return t?t+="--":t="",Object.keys(n).forEach((function(i){e[i]&&(a+=" ".concat(t).concat(n[i]))})),a}function p(e){return[].concat(e)}function d(e){if(e){var t="".concat("square"," ").concat(e&&e.squareType);return t+=l(e,"square"),e.entity&&(t+=l(e.entity,"square")),t}}n.d(t,"i",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return d}))},,function(e,t,n){"use strict";var a=n(1),i=n(9),r=n(10),o=n(25),s=n(15),c=new function e(){var t=this;Object(a.a)(this,e),this.entities=void 0,this.squares=void 0,this.selected=void 0,this.saveMap=function(){var e=JSON.parse(JSON.stringify(i.a.squares)).map((function(e){return e})),t=JSON.stringify(e);console.log(t);var n=window.prompt("Enter the name of saved map.","map00");localStorage[n]=t},this.loadMap=function(){var e=Object.keys(localStorage),n="Enter the name of map to load. ".concat(e),a=window.prompt(n,"map00"),i=localStorage[a];console.log(i);var r=JSON.parse(i);t.loadMapIntoBoard(r)},this.loadMapIntoBoard=function(e){i.a.squares.forEach((function(t,n){var a=t,i=e[n];a.squareType=i&&i.squareType||"floor"}))},this.loadEntities=function(e){r.d.entities=e},this.loadBuiltInMap=function(){t.loadMapIntoBoard(o)},this.loadPredefinedEntitities=function(){t.loadEntities(s.a)},this.entities=r.d.entities,this.squares=i.a.squares};n.d(t,"a",(function(){return c}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11),i=n(3),r=[{name:"Lazer Blady",age:60,hp:75,maxHp:100,icon:"\ud83e\uddd1\ud83c\udffb",isBreathing:!0,isFriendly:!0,hasWeapon:!0,position:{x:4,y:8},inventory:[new a.b],equipment:{hands:new a.a}},{name:"Robot",age:1,hp:50,maxHp:50,icon:"\ud83e\udd16",isBreathing:!1,position:{x:3,y:5},equipment:{hands:new a.a},inventory:[],hasWeapon:!0},{name:"Octo",age:8,hp:200,maxHp:200,icon:"\ud83d\udc19",isBreathing:!0,position:{x:8,y:2},bleedingReductionPerTurn:0,bleeding:1,equipment:{hands:new a.a},inventory:[],hasWeapon:!0},{name:"Squid",age:5,hp:100,maxHp:100,icon:"\ud83e\udd91",isBreathing:!0,position:{x:5,y:5},equipment:{hands:new a.c},inventory:[],hasWeapon:!0},{name:"Ant",age:1,hp:45,maxHp:50,icon:"\ud83d\udc1c",isBreathing:!0,position:{x:7,y:6},equipment:{hands:new a.c},inventory:[],hasWeapon:!0},{name:"Henry The Spider",age:1,hp:100,maxHp:150,icon:"\ud83d\udd77\ufe0f",isBreathing:!0,position:{x:9,y:3},bleedingReductionPerTurn:1,equipment:{hands:new a.a},inventory:[],hasWeapon:!0},{name:"Mosquito",age:1,hp:12,maxHp:20,icon:"\ud83e\udd9f",isBreathing:!0,position:{x:2,y:7},equipment:{hands:new a.b},inventory:[],hasWeapon:!0},{name:"Microbe",age:1,hp:1,maxHp:5,icon:"\ud83e\udda0",isBreathing:!0,position:{x:1,y:5},equipment:{hands:new a.a},inventory:[],hasWeapon:!0}].map((function(e){return new i.Entity(e)}))},function(e,t,n){e.exports={board:"Board_board__1AthT",board__row:"Board_board__row__1piKV","board--rotated":"Board_board--rotated__be1H9"}},,function(e,t,n){"use strict";var a=n(19);n.d(t,"GameLogic",(function(){return a.a}));var i=n(20);n.o(i,"GameActionsClass")&&n.d(t,"GameActionsClass",(function(){return i.GameActionsClass})),n.o(i,"GameModel")&&n.d(t,"GameModel",(function(){return i.GameModel}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),i=n(2),r=n(14),o=n(9),s=n(10),c=n(8),u=new(function(){function e(){Object(a.a)(this,e),this.model=void 0,this.run=function(){console.log("Running Game Logic"),console.log(r.a.entities)},this.calculateNextInterfaceState=function(e){var t=e,n=t.entities,a=t.selected;return n.forEach((function(e){e===a&&o.a.markAvailableDestinationsForSelectedEntity(a)})),t},this.syncSquaresWithEntities=function(e){var t=c.f(e.squares);o.a.squares=t;var n=e.entities;return n.length&&c.g(t,"entity"),n.forEach((function(e){o.a.setEntityWithinApropriateSquare(e)})),{squares:t}},this.deselectAllEntities=function(){c.g(s.d.entities,"active"),c.g(o.a.squares,"isChosenDestination","isAvailableDestination")},this.ceaseFire=function(){c.g(r.a.entities,"isShooting")},this.model=r.a}return Object(i.a)(e,[{key:"calculateNextGameState",value:function(e){var t=e,n=t.entities;return s.d.moveEntities(),n.forEach((function(e){s.d.isEntityShootingProperly(e)&&s.d.fireAShot(e),e.bleedExternally(),s.d.stopBreathingForKilledEntity(e),o.a.markAvailableDestinationsForSelectedEntity(e)})),t.enemiesAlive=this.calculateNumberOfAliveEnemies(n),console.log(t.enemiesAlive),t}},{key:"calculateNumberOfAliveEnemies",value:function(e){var t=0;return e.forEach((function(e){e.isFriendly||e.hp>0&&t++})),t}}]),e}())},function(e,t){},function(e,t,n){"use strict";var a=n(2),i=n(5),r=n(4),o=n(6),s=n(1),c=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).causesBleeding=0,n.range=0,n.damage=0,n}return Object(o.a)(t,e),t}((function e(){Object(s.a)(this,e),this.name=""})),u=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).rounds=0,n.maxRounds=5,n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"fire",value:function(){return this.rounds--,console.log("Firing ranged weapon. Damage: ",this.damage),this.damage}},{key:"reload",value:function(){this.rounds=this.maxRounds}},{key:"isAbleToFire",get:function(){return this.rounds>0}}]),t}(c),l=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).type="projectile",n.range=4,n.damage=1,n.causesBleeding=2,n}return Object(o.a)(t,e),t}(u),p=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).type="lazer",n.range=6,n.damage=5,n.causesBleeding=0,n}return Object(o.a)(t,e),t}(u);n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p}))},function(e,t,n){"use strict";var a=n(1),i=n(2),r=new(function(){function e(){Object(a.a)(this,e),this.messages=[]}return Object(i.a)(e,[{key:"send",value:function(e){this.messages.push(e)}}]),e}());n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var a=n(1),i=n(2),r=n(8),o=n(3),s=null,c=function(){function e(t){var n=this;Object(a.a)(this,e),this.toggleEditorMode=function(){s.state.isEditorOn?s.setState((function(e){return{squares:o.SquaresService.squares,entities:o.EntitiesService.entities,isEditorOn:!1}})):(r.g(s.state.squares,"blood","entity"),s.setState((function(e){return{entities:[],isEditorOn:!0}})))},this.loop=function(){s.stepNumber++,n.drawAggro(),n.processEntities(),s.state.autoLoop&&setTimeout(n.loop,1e3)},this.nextTick=function(){s.setState({autoLoop:!1}),n.loop()},this.handleClickV2=function(e){s.setState((function(t){var n=t.squares,a=t.entities,i=t.selected,s=t.targeted,c=t.isEditorOn,u=t.targetedSquareNumber,l=s;s=n[e],u=e;var p=function(){return l===s};if(o.SquaresService.markSquareAsTargeted(e),c)switch(s.squareType){case"floor":s.squareType="wall";break;case"wall":s.squareType="nothing";break;case"nothing":default:s.squareType="floor"}return p()&&s.isAvailableDestination&&i.setMoveDestinationSquare(e),(p()||i)&&(!i&&s.entity?i=o.EntitiesService.selectEntityFromGivenSquare(i,s):r.e(i,s)),p()&&i&&s.entity&&i!==s.entity&&i.attackPosition(o.SquaresService.targetSquarePosition(e)),{squares:n,entities:a,selected:i,targeted:s,targetedSquareNumber:u}}),(function(){return n.processInterface()}))},this.aggro=function(e){var t=o.EntitiesService.findEntityById(e),a=t.position,i=n.findEntitiesThatAreClose(a).filter((function(e){return e.hp>0}));if(i.length){var r=i[0];t.attackPosition(r.position)}},this.nuke=function(e){s.setState((function(t){var n=t.entities;return n.forEach((function(t){t.hp=t.hp-e})),{entities:n}}),(function(){n.processEntities()}))},this.toggleRotateBoard=function(){s.setState({isBoardRotated:!s.state.isBoardRotated})},this.switchAutoLoop=function(){s.setState((function(e){return{autoLoop:!e.autoLoop}}),(function(){s.state.autoLoop&&n.loop()}))},this.onInventoryClick=function(e,t){s.setState((function(n){var a=[].concat(n.entities);o.EntitiesService.entities=a;var i=o.EntitiesService.getEntityId(e),r=o.EntitiesService.findEntityById(i);return r.equipment.hands&&r.equipment.hands.name===t?r.unEquipFromHands():r.equipInHands(t),{entities:a}})),console.log(e,t)},this.handleDeselectAllEntities=function(){s.setState((function(e){var t=e.squares,n=e.entities;e.selected;return o.GameLogic.deselectAllEntities(),void 0,{squares:t,entities:n,selected:void 0}}),(function(){}))},this.ceaseFire=function(){r.g(o.EntitiesService.entities,"isShooting"),n.processInterface()},s=t}return Object(i.a)(e,[{key:"processEntities",value:function(){var e=this;s.setState((function(e){return o.GameLogic.calculateNextGameState(e)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"processInterface",value:function(){var e=this;s.setState((function(e){return o.GameLogic.calculateNextInterfaceState(e)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"setSquaresAccordingToEntities",value:function(){s.setState((function(e){return o.GameLogic.syncSquaresWithEntities(e)}))}},{key:"drawAggro",value:function(){var e=this;o.EntitiesService.entities.forEach((function(t){t.isFriendly||(t.isShooting=!1,e.aggro(t.name))}))}},{key:"findEntitiesThatAreClose",value:function(e){for(var t=e.x,n=e.y,a=[],i=n-1;i<=n+1;i++)if(!(i<0||i>=o.SquaresService.arenaSize))for(var r=t-1;r<=t+1;r++)if(!(r<0||r>=o.SquaresService.arenaSize||r===t&&i===n)){var s=o.EntitiesService.getEntitiesAtGivenPosition({x:r,y:i});a=a.concat(s)}return a}}]),e}();n.d(t,"a",(function(){return c}))},,function(e){e.exports=JSON.parse('[{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"wall"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"floor","entity":{"isFriendly":true,"name":"Lux Aeterna","age":20,"hp":50,"maxHp":50,"icon":"\ud83d\udc71\u200d\u2640\ufe0f","isSupposedToBeBreathing":true,"position":{"x":1,"y":1},"inventory":[{"name":"Assault Lazer Cannon","causesBleeding":0,"range":6,"damage":10,"rounds":3,"maxRounds":3,"type":"lazer"}],"equipment":{}}},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"wall"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Spider","age":1,"hp":100,"maxHp":150,"icon":"\ud83d\udd77\ufe0f","isSupposedToBeBreathing":true,"position":{"x":9,"y":3},"bleedingReductionPerTurn":1}},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Octo","age":8,"hp":167,"maxHp":200,"icon":"\ud83d\udc19","isSupposedToBeBreathing":true,"position":{"x":8,"y":4},"bleedingReductionPerTurn":0,"bleeding":1},"blood":4},{"squareType":"floor","entity":{"isFriendly":true,"name":"John Rambo","age":40,"hp":95,"maxHp":100,"icon":"\ud83d\ude20","isSupposedToBeBreathing":true,"position":{"x":9,"y":4},"inventory":[{"name":"KA-BAR"},{"name":"M16","causesBleeding":4,"range":4,"damage":2,"rounds":15,"maxRounds":20,"type":"projectile"}],"equipment":{"head":"Red Bandana","hands":null}}},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Microbe","age":1,"hp":1,"maxHp":5,"icon":"\ud83e\udda0","isSupposedToBeBreathing":true,"position":{"x":3,"y":5}}},{"squareType":"floor","entity":{"name":"Robot","age":1,"hp":50,"maxHp":50,"icon":"\ud83e\udd16","isSupposedToBeBreathing":false,"position":{"x":4,"y":5}}},{"squareType":"floor"},{"squareType":"wall"},{"squareType":"wall"},{"squareType":"wall"},{"squareType":"floor","blood":2},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Ant","age":1,"hp":45,"maxHp":50,"icon":"\ud83d\udc1c","isSupposedToBeBreathing":true,"position":{"x":7,"y":6}}},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Mosquito","age":1,"hp":12,"maxHp":20,"icon":"\ud83e\udd9f","isSupposedToBeBreathing":true,"position":{"x":2,"y":7}}},{"squareType":"nothing"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"wall"},{"squareType":"wall"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"isFriendly":true,"name":"Ellen Replay","age":30,"hp":50,"maxHp":65,"icon":"\ud83d\udc69","isSupposedToBeBreathing":true,"position":{"x":1,"y":8},"inventory":[{"name":"M41A Pulse Rifle","causesBleeding":4,"range":4,"damage":1,"rounds":40,"maxRounds":40,"type":"projectile"},{"name":"Motion Detector"}],"equipment":{"head":"Afro"}}},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"isFriendly":true,"name":"Lazer Blady","age":60,"hp":75,"maxHp":100,"icon":"\ud83e\uddd1\ud83c\udffb","isSupposedToBeBreathing":true,"position":{"x":4,"y":8},"inventory":[{"name":"Assault Lazer Cannon","causesBleeding":0,"range":6,"damage":10,"rounds":3,"maxRounds":3,"type":"lazer"},{"name":"M16","causesBleeding":4,"range":4,"damage":2,"rounds":15,"maxRounds":20,"type":"projectile"}],"equipment":{}}},{"squareType":"floor"},{"squareType":"wall"},{"squareType":"wall"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"nothing"},{"squareType":"nothing","isTargeted":true},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor"},{"squareType":"floor","entity":{"name":"Squid","age":5,"hp":100,"maxHp":100,"icon":"\ud83e\udd91","isSupposedToBeBreathing":true,"position":{"x":8,"y":9}}},{"squareType":"floor"}]')},function(e,t,n){e.exports=n(44)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(24),o=n(1),s=n(2),c=n(5),u=n(4),l=n(13),p=n(6),d=n(3),h=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log("BLOOD",this.props);for(var e=this.props.bloodAmount,t=[],n=e;n--;)t.push(i.a.createElement("span",{style:{position:"absolute",left:"".concat(90*Math.random(),"%"),top:"".concat(90*Math.random()-15,"%")}},"o"));return i.a.createElement("div",{className:"square__blood",style:{position:"relative"}},t,e)}}]),t}(i.a.PureComponent),m=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).itemsIcons=[],n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,a=t.itemsNumber;return n?(n.forEach((function(t){var n=t;n.icon&&e.itemsIcons.push(i.a.createElement("div",{className:"square__item-icon"},n.icon))})),i.a.createElement("div",{className:"square__items"},i.a.createElement("div",{className:"square__items-icons"},this.itemsIcons),i.a.createElement("div",{className:"square__items-number"},a))):null}}]),t}(i.a.PureComponent),f=(n(31),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).onClick=function(){n.props.onClick(n.props.squareId)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("button",{className:this.props.className,onClick:this.onClick},i.a.createElement(h,{bloodAmount:this.props.blood}),i.a.createElement(m,{items:this.props.items,itemsNumber:this.props.itemsNumber}),i.a.createElement("div",{className:"square__content"},"\xa0"),function(e){for(var t=6,n=[];t--;)n.push(i.a.createElement("div",{key:t,className:"".concat(e,"__cuboid-face")}));return i.a.createElement("div",{className:"".concat(e,"__cuboid")},n)}("square"))}}]),t}(i.a.PureComponent)),y=(n(32),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=~~(100*this.props.current/this.props.max),t={width:"".concat(e,"%"),backgroundColor:this.props.color};return i.a.createElement("div",{className:"hpbar"},i.a.createElement("div",{className:"hpbar__indicator",style:t}),i.a.createElement("span",{className:"hpbar__text"},this.props.current))}}]),t}(i.a.Component)),v=n(8);function g(e){var t=e.entity,n=v.b,a=t.targetPosition,r=5,o=[],s="Entity".concat(t.icon),c="";if(a&&t.position&&t.hasWeapon&&t.isShooting&&(t.targetPosition.x!==t.position.x||t.targetPosition.y!==t.position.y)&&a){var u=a.x-t.position.x,l=a.y-t.position.y,p=v.c(u,l),d=t&&t.equipment&&t.equipment.hands&&t.equipment.hands.type,h=n(u,l);if("lazer"===d){var m="projectile".concat(s,"_beam");c="\n          @keyframes pulsing".concat(s," {\n            0%  {opacity: 0.1;}\n            100%  {opacity: 1;}\n          }\n\n          @keyframes elongating").concat(s," {\n            0%  { width: calc(").concat(p,"em + ").concat(p," * 4px - 20px); }\n            100%  {width: calc(").concat(p,"em + ").concat(p," * 4px - 20px); }\n          }\n\n          @keyframes swiping").concat(s," {\n            0%  {transform: rotate(").concat(h+90-1,"deg) translateX(").concat(20,"px);}\n            50%  {transform: rotate(").concat(h+90+1,"deg) translateX(").concat(20,"px);}\n            100%  {transform: rotate(").concat(h+90-1,"deg) translateX(").concat(20,"px);}\n          }\n\n          .").concat(m," {\n            width: ").concat(p,"em;\n            height: 3px;\n            border-radius: 5px;\n            background: #F00;\n            position: absolute;\n            top: 0.5em;\n            left: 0.5em;\n            transform: rotate(").concat(h+90,"deg);/* overriden by swiping keyframes */\n            transform-origin: left 0px;\n            animation: pulsing").concat(s," 0.1s ease infinite,\n            elongating").concat(s," 0.7s ease alternate infinite,\n            swiping").concat(s," 1s ease alternate infinite;\n            box-shadow: 0 0 5px 5px white;\n            z-index: 10;\n          }\n          "),o.push(i.a.createElement("div",{key:m,className:m},""))}else{for(c="\n          @keyframes shooting".concat(s," {\n            0%   {transform: translate(0,0) rotate(").concat(h,"deg) scaleY(0.3)}\n            100% {transform: translate(\n              ").concat(36*(a.x-t.position.x),"px,\n              ").concat(36*(a.y-t.position.y),"px\n            ) rotate(").concat(h,"deg) scaleY(2)}\n          }\n          ");r--;)c+="\n          .projectile".concat(s,"_").concat(r," {\n            transform: rotate(").concat(h,"deg);\n            animation: shooting").concat(s," 0.8s linear infinite;\n            animation-delay: ").concat(r-.3,"s;\n          }");var f=t.isShooting?"|":"";for(r=3;r--;){var y="projectile projectile".concat(s,"_").concat(r);o.push(i.a.createElement("div",{key:y,className:y},f))}}}return i.a.createElement("div",{className:"shooting-visualization"},i.a.createElement("style",null,c),o)}n(33);var b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).randomTime="".concat((Math.random()+.5).toFixed(2),"s"),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.entity,t=d.SquaresService.getSquare(e.position.x,e.position.y),n="".concat("entity-pawn__icon"),a=v.h(e,"entity-pawn__icon");a+=v.h(t,"entity-pawn__icon"),n+=" ".concat(a," ");var r=e.isFriendly?"friendly":"hostile",o=e.isFriendly?"green":"red",s=e.isShooting?5:1,c=e.isBreathing?"breathing ".concat(this.randomTime," alternate infinite linear"):"none";return i.a.createElement("div",{className:"entity-pawn",key:e.name,style:{left:"calc(".concat(13,"px + ").concat(2*e.position.x*2,"px + ").concat(e.position.x,"em)"),top:"calc(".concat(13,"px + ").concat(2*e.position.y*2,"px + ").concat(e.position.y,"em)"),zIndex:s}},i.a.createElement("div",{className:"entity-pawn__health-display "+r},i.a.createElement(y,{current:e.hp,max:e.maxHp,color:o})),i.a.createElement("div",{className:n,style:{animation:c}},e.icon),i.a.createElement(g,{entity:e}))}}]),t}(i.a.Component),q=n(16),E=n.n(q),k=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){console.log("Handles Click on Board",e),n.props.onClick(e)},n.EntityPawns=function(){return n.props.entities.map((function(e){return i.a.createElement(b,{key:e.name,entity:e})}))},n.BoardSquares=function(){var e,t=0,a=0;return Array(n.props.size).fill(null).map((function(r,o){e=0;var s=Array(n.props.size).fill(null).map((function(i,r){return n.renderSquare(t++,a,e++)}));return i.a.createElement("div",{key:a++,className:E.a.board__row},s)}))},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderSquare",value:function(e,t,n){var a=this.props.squares[e];return i.a.createElement(f,{key:"r".concat(t,"_c").concat(e),squareId:e,className:v.d(a),onClick:this.handleClick,blood:a&&a.blood,items:a&&a.items,itemsNumber:a&&a.items&&a.items.length})}},{key:"render",value:function(){var e=E.a.board;return this.props.isRotated&&(e+=" ".concat(E.a["board--rotated"]," board--rotated")),i.a.createElement("div",{className:e,style:this.props.style},this.BoardSquares(),this.EntityPawns())}}]),t}(i.a.Component);n(34);function S(e){var t="linear-display ".concat(e.className||""),n=~~(100*e.current/e.max),a=n>100;a&&(n=100,t+=" linear-display--overloaded");var r={width:"".concat(n,"%")},o=e.title||"".concat(e.current,"/").concat(e.max),s=e.current,c=1;e.max>=40&&e.max<100?c=5:e.max>=100&&(c=10);var u={backgroundSize:"".concat(100/(s/=c),"% 100%"),backgroundImage:"\n      linear-gradient(to left, ".concat("black"," 1px, transparent 1px)\n    ")};return Object.assign(r,u),i.a.createElement("div",{className:t},i.a.createElement("div",{className:"linear-display__label"},e.label,":\xa0"),i.a.createElement("div",{className:"linear-display__bar-container",title:o},i.a.createElement("div",{className:"linear-display__bar-progress",style:r},i.a.createElement("span",{className:"linear-display__bar-progress-text"},e.current,a?"/"+e.max:"","\xa0"))),i.a.createElement("div",null,"\xa0"))}n(35);function O(e){var t,n,a,r=e.item;if(e.onDrop&&(n=i.a.createElement("button",{className:"inventory-list__drop-button",onClick:function(){e.onDrop(r.name)}},"Drop")),r instanceof d.RangedWeapon){var o=r;if(o.reload){var s=" inventory-list__reload-button ";0===o.rounds||"empty"===o.rounds?s+=" inventory-list__reload-button--empty ":o.rounds<o.maxRounds&&(s+=" inventory-list__reload-button--partial "),t=i.a.createElement("button",{className:s,onClick:function(){o.reload(),e.onReload&&e.onReload(r.name),e.processInterface()}},"Reload")}else t=null;a=o.reload?i.a.createElement(S,{label:"Rounds",current:o.rounds,max:o.maxRounds}):null}return i.a.createElement("div",{key:r.name},i.a.createElement("div",{onClick:function(){return e.onClick(r.name)},key:r.name,className:"inventory-list__item"},i.a.createElement("span",null,r.name),i.a.createElement("div",null,a)),t,n)}function j(e){var t="inventory-list ".concat(e.className||"");if(!e.inventory)return null;var n=e.inventory.map((function(t){return i.a.createElement(O,{key:"i".concat(t.name),item:t,onClick:e.onClick,onDrop:e.onDrop,onReload:e.onReload,processInterface:e.processInterface})}));return i.a.createElement("div",{className:t},i.a.createElement("div",{className:"inventory-list__label"},e.label,":\xa0"),i.a.createElement("div",{className:"inventory-list__items",title:e.title},n))}n(36);var x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderCount=0,n.handleInventoryClick=function(e){n.props.onInventoryClick(n.props.entity,e)},n.onDrop=function(e){var t=n.props.entity;t.equipment.hands&&t.equipment.hands.name===e&&(t.unEquipFromHands(),t.isShooting=!1);var a=t.takeFromInventory(e);t.square.addItem(a),n.props.processInterface()},n.onReload=function(e){var t=n.props.entity;t.equipment.hands&&t.equipment.hands.name===e&&(t.isShooting=!1),n.props.processInterface()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.entity;if(!t)return null;var n="entity-card";t.active&&(n+=" entity-card--active"),t.isFriendly&&(n+=" entity-card--friendly"),t.isDead&&(n+=" entity-card--dead");var a=t.equipment&&t.equipment.hands,r=a&&[a];return i.a.createElement("div",{className:n},i.a.createElement("div",null,i.a.createElement("div",{className:"entity-card__position",title:"Position"},i.a.createElement("span",null," ",t.position.x," ",t.position.y," ")),i.a.createElement("div",{className:"entity-card__portrait"},t.icon)),i.a.createElement("strong",{title:"Name"},t.name),i.a.createElement("br",null),i.a.createElement("div",{style:{clear:"both",display:"inline-block",textAlign:"right"}},i.a.createElement(S,{label:"HP",current:t.hp,max:t.maxHp}),i.a.createElement("br",null)),i.a.createElement(j,{label:"Equipped",title:"In hands",onClick:this.handleInventoryClick,onDrop:this.onDrop,onReload:this.onReload,inventory:r,processInterface:function(){return e.props.processInterface()}}),i.a.createElement(j,{label:"Inventory",title:"In backpack",onClick:this.handleInventoryClick,onDrop:this.onDrop,onReload:this.onReload,inventory:t.inventory,processInterface:function(){return e.props.processInterface()}}))}}]),t}(i.a.Component),T=(n(15),{box:{name:"box",icon:"\ud83d\udce6",hp:50,maxHp:70,isBreathing:!1,position:{x:4,y:5}},redBarrel:{name:"redBarrel",icon:"\ud83d\udee2\ufe0f",hp:50,maxHp:70,isBreathing:!1,position:{x:4,y:5}}}),_=(n(11),n(7)),A=n.n(_),N=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).boxSerialNumber=0,n.onItemClick=function(e){var t=n.props,a=t.selected,i=t.targeted,r=t.squareNumber,o=d.SquaresService.targetSquarePosition(r);if(a&&i&&a.position.x==o.x&&a.position.y==o.y){var s=i.takeFromInventory(e);a.addToInventory(s)}n.props.processInterface()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onMoveClick",value:function(e,t){var n=d.SquaresService.getSquare(t.x,t.y);e.setMoveDestinationPosition(t),n.isChosenDestination=!0,this.props.processInterface()}},{key:"onAttackClick",value:function(e,t){e.attackPosition(t),this.props.processInterface()}},{key:"onAddStructureClick",value:function(e,t){var n=Object.assign({},T[t]),a=Object.assign({},e);n.position=a,n.name+=this.boxSerialNumber++;var i=new d.Entity(n),r=d.SquaresService.getSquare(e.x,e.y);r.entity=i,r.addToInventory(i),this.props.processInterface()}},{key:"render",value:function(){var e=this,t=this.props,n=t.targeted,a=t.selected,r=t.squareNumber;if(!n)return null;var o,s,c,u,l,p=d.SquaresService.targetSquarePosition(r),h=[],m=i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.onAddStructureClick(p,"box")},className:A.a.button},"Add box"),i.a.createElement("button",{onClick:function(){return e.onAddStructureClick(p,"redBarrel")},className:A.a.button},"Add barrel"));if(n.entity&&!v.e(a,n)&&(o=i.a.createElement(x,{onInventoryClick:this.props.onInventoryClick,entity:n.entity,processInterface:function(){return e.props.processInterface()}})),n.items&&(l=i.a.createElement(j,{label:"Items in this location",title:"On the floor",onClick:this.onItemClick,onDrop:null,onReload:null,inventory:n.items,processInterface:function(){return e.props.processInterface()}})),a){var f=v.c(p.x-a.position.x,p.y-a.position.y);s=i.a.createElement("li",null,"Distance to selected: ",f.toFixed(2)),0!==f&&(n.isAvailableDestination&&(h[0]=i.a.createElement("button",{key:"move",onClick:function(){return e.onMoveClick(a,p)},className:A.a.button},"Move")),n.entity&&(h[1]=i.a.createElement("button",{key:"attack",onClick:function(){return e.onAttackClick(a,p)},className:A.a.button},"Attack")))}return p&&(c=i.a.createElement("li",null,"Position: [ ",p.x,", ",p.y," ]"," ")),n.blood&&(u=i.a.createElement("li",null,"Blood amount: ",n.blood)),i.a.createElement("div",{className:this.props.className},i.a.createElement("strong",{className:A.a.targeted__label},"Target square Info"),i.a.createElement("div",null,o),i.a.createElement("div",null,h),i.a.createElement("ul",null,c,s,u,l,m))}}]),t}(i.a.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.selected?i.a.createElement("div",{className:A.a.selected},i.a.createElement("strong",{className:A.a.selected__label},"Selected entity "),i.a.createElement("div",null,i.a.createElement(x,{onInventoryClick:this.props.onInventoryClick,entity:this.props.selected,processInterface:function(){return e.props.processInterface()}})),i.a.createElement("button",{onClick:this.props.handleDeselectAllEntities,className:A.a.button}," ","Deselect")):null}}]),t}(i.a.Component),w=(n(37),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).messages=d.MessageService.messages,n.messageNumber=void 0,n.renderMessage=function(e,t){return i.a.createElement("li",{key:"msg".concat(t)},"Message #[",t,"]: ",e)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(){return this.messages.length!==this.messageNumber}},{key:"render",value:function(){var e=this;if(!this.messages.length)return null;var t=this.messages.map((function(t,n){return e.renderMessage(t,n)}));return this.messageNumber=this.messages.length,i.a.createElement("ul",{className:"messages",id:"messages"},t)}},{key:"scrollElement",value:function(){window.requestAnimationFrame((function(){var e=document.getElementById("messages");e.scrollTop=e.scrollHeight}))}},{key:"componentDidUpdate",value:function(){this.messages.length&&this.scrollElement()}}]),t}(i.a.Component)),I=null,B=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderCounter=0,n.stepNumber=0,d.GameModel.loadBuiltInMap(),d.GameModel.loadPredefinedEntitities(),n.state={entities:d.EntitiesService.entities,squares:d.SquaresService.squares,squareSize:40,selected:d.EntitiesService.findEntityById("Lazer Blady"),targeted:null,targetedSquareNumber:null,enemiesAlive:null,arenaSize:10,autoLoop:!0,isBoardRotated:!1,isEditorOn:!1},n.state.selected.active=!0,I=new d.GameActionsClass(Object(l.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){I.loop()}},{key:"zoomIn",value:function(){this.setState((function(e){return{squareSize:e.squareSize+5}}))}},{key:"zoomOut",value:function(){this.setState((function(e){return{squareSize:e.squareSize-5}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:A.a.game},i.a.createElement("div",{className:A.a.status},"Enemies to kill: ",this.state.enemiesAlive,i.a.createElement("br",null),this.state.enemiesAlive?"":" Great Job. YOU WON.",this.state.selected.isAlive?"":" Damn. YOU DIED."),i.a.createElement("p",null,"L2P: Click friendly entity on the map, twice. Then click a target square to move, or target entity to attack."),i.a.createElement("div",{className:A.a.game__board},i.a.createElement(k,{squares:this.state.squares,entities:this.state.entities,onClick:function(e){return I.handleClickV2(e)},size:this.state.arenaSize,isRotated:this.state.isBoardRotated,style:{fontSize:"".concat(this.state.squareSize,"px")}})),i.a.createElement("div",{className:A.a.game__info},i.a.createElement("div",{className:A.a.actions},i.a.createElement("button",{onClick:I.toggleEditorMode,className:A.a.button},"Editor Mode"),i.a.createElement("button",{onClick:d.GameModel.saveMap,className:A.a.button},"Save Map"),i.a.createElement("button",{onClick:d.GameModel.loadMap,className:A.a.button},"Load Map"),i.a.createElement("button",{onClick:function(){I.nuke(40)},className:"".concat(A.a.button," ").concat(A.a["button-nuke"])},"Nuke All"),i.a.createElement("button",{onClick:I.ceaseFire,className:A.a.button},"Cease Fire"),i.a.createElement("button",{onClick:I.toggleRotateBoard,className:A.a.button},"Rotate Board"),i.a.createElement("button",{onClick:function(){return e.zoomIn()},className:A.a.button},"Zoom In (+)"),i.a.createElement("button",{onClick:function(){return e.zoomOut()},className:A.a.button},"Zoom Out (-)"),i.a.createElement("button",{onClick:I.nextTick,className:A.a.button},"Next Tick"),i.a.createElement("span",{className:A.a["step-counter"]},"Tick: ",this.stepNumber),i.a.createElement("label",{className:" ".concat(A.a.button," ").concat(A.a["auto-cycle"])},i.a.createElement("input",{type:"checkbox",checked:this.state.autoLoop,onChange:I.switchAutoLoop}),i.a.createElement("span",null,"Auto Cycle"))),i.a.createElement("div",{className:A.a["interaction-container"]},i.a.createElement(C,{selected:this.state.selected,handleDeselectAllEntities:I.handleDeselectAllEntities,onInventoryClick:I.onInventoryClick,processInterface:function(){return I.processInterface()}}),i.a.createElement(N,{className:A.a.targeted,squareNumber:this.state.targetedSquareNumber,squares:this.state.squares,selected:this.state.selected,targeted:this.state.targeted,onInventoryClick:I.onInventoryClick,processInterface:function(){return I.processInterface()}}),i.a.createElement("div",null)),i.a.createElement(w,null)))}}]),t}(i.a.PureComponent),D=(n(38),i.a.Component,n(39),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"hud-panel"},i.a.createElement("div",{className:"hud-panel__title"},this.props.title),i.a.createElement("div",{className:"hud-panel__content"},this.props.children))}}]),t}(i.a.Component)),M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"cell"},this.props.children)}}]),t}(i.a.PureComponent),R=(n(40),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).gridReference=void 0,n.scroll={x:0,y:0},n.mapdrag=!1,n.stateDriven=!1,n.state={mapdrag:!1,scroll:{x:0,y:0}},n.gridReference=i.a.createRef(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"scrollRelativeXY",value:function(e,t){this.scroll.x-=e,this.scroll.y-=t,this.scroll.x<=0&&(this.scroll.x=0),this.scroll.y<=0&&(this.scroll.y=0),this.stateDriven&&this.setState({scroll:{x:this.scroll.x,y:this.scroll.y}}),this.executeScroll()}},{key:"renderGrid",value:function(){for(var e=this,t=[],n=0;n<=this.props.height;n++){for(var a=this.props.startAt[1]+n,r=[],o=0;o<=this.props.width;o++){var s=this.props.startAt[0]+o,c=i.a.createElement(M,{key:"$key_".concat(s,"_").concat(a)},s,", ",a);r.push(c)}t.push(i.a.createElement("div",{className:"row",key:"$key_X_".concat(a)},r))}return i.a.createElement("div",{className:"grid",ref:this.gridReference,onMouseDown:function(t){return e.onMouseDown(t)},onMouseUp:function(t){return e.onMouseUp(t)},onMouseMove:function(t){return e.handleMove(t)},onContextMenu:function(e){return e.preventDefault()},onDrag:function(t){return e.onMouseDrag(t)}},t)}},{key:"handleMove",value:function(e){this.mapdrag&&this.scrollRelativeXY(e.movementX,e.movementY)}},{key:"onMouseDrag",value:function(e){console.log(e)}},{key:"onMouseDown",value:function(e){console.log(e.button),2===e.button&&(this.mapdrag=!0),e.preventDefault(),console.log(this.mapdrag)}},{key:"onMouseOut",value:function(e){console.log("MOUSE OUT"),this.mapdrag=!1}},{key:"startDragging",value:function(e){this.mapdrag=!0}},{key:"onMouseUp",value:function(e){console.log(e.button),2===e.button&&(this.mapdrag=!1),e.preventDefault(),console.log(this.mapdrag)}},{key:"onChangeScrollX",value:function(e){console.log(e.target.value),this.scroll.x=e.target.value,this.executeScroll()}},{key:"onChangeScrollY",value:function(e){console.log(e.target.value),this.scroll.y=e.target.value,this.executeScroll()}},{key:"executeScroll",value:function(){this.gridReference.current.scroll({top:this.scroll.y,left:this.scroll.x})}},{key:"switchStateDriven",value:function(e){console.log(e.target.checked),this.stateDriven=e.target.checked}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"grid-container"},i.a.createElement("pre",{className:"gridDebugData"},"Width: ",this.props.width,i.a.createElement("br",null),"Height: ",this.props.height,i.a.createElement("br",null),"StartAt: ",this.props.startAt[0],", ",this.props.startAt[1],i.a.createElement("br",null),"ScrollX: ",i.a.createElement("input",{onChange:function(t){return e.onChangeScrollX(t)}}),i.a.createElement("br",null),"ScrollY: ",i.a.createElement("input",{onChange:function(t){return e.onChangeScrollY(t)}}),i.a.createElement("br",null),"StateDriven: ",i.a.createElement("input",{type:"checkbox",onChange:function(t){return e.switchStateDriven(t)}}),i.a.createElement("br",null),"State mapdrag: ",this.state.mapdrag,i.a.createElement("br",null),"State scrollX: ",this.state.scroll.x,i.a.createElement("br",null),"State scrollY: ",this.state.scroll.y,i.a.createElement("br",null)),this.renderGrid())}}]),t}(i.a.Component)),P=(n(41),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={w:!1,s:!1,a:!1,d:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){return e.onKeyDown(t)}),!1),document.addEventListener("keyup",(function(t){return e.onKeyUp(t)}),!1)}},{key:"onKeyDown",value:function(e){switch(console.log(e),e.keyCode){case 87:this.setState({w:!0}),this.props.onKeyPress("w");break;case 83:this.setState({s:!0}),this.props.onKeyPress("s");break;case 65:this.setState({a:!0}),this.props.onKeyPress("a");break;case 68:this.setState({d:!0}),this.props.onKeyPress("d")}}},{key:"onKeyUp",value:function(e){switch(console.log(e),e.keyCode){case 87:this.setState({w:!1});break;case 83:this.setState({s:!1});break;case 65:this.setState({a:!1});break;case 68:this.setState({d:!1})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"controls"},"[",i.a.createElement("span",{className:"".concat(this.state.w?"pressed":""," key")},"W"),"] [",i.a.createElement("span",{className:"".concat(this.state.s?"pressed":""," key")},"S"),"] [",i.a.createElement("span",{className:"".concat(this.state.a?"pressed":""," key")},"A"),"] [",i.a.createElement("span",{className:"".concat(this.state.d?"pressed":""," key")},"D"),"]")}}]),t}(i.a.Component)),G=(n(42),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={gridX:0,gridY:0},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"onControlPress",value:function(e){var t=0,n=0;switch(e){case"w":n=-1;break;case"s":n=1;break;case"a":t=-1;break;case"d":t=1}console.log(e),this.setState((function(e){return{gridX:e.gridX+t,gridY:e.gridY+n}}))}},{key:"render",value:function(){var e=this,t=i.a.createElement(P,{keys:["W","S","A","D"],onKeyPress:function(t){return e.onControlPress(t)}}),n=i.a.createElement(i.a.Fragment,null),a=i.a.createElement(i.a.Fragment,null);return i.a.createElement("div",{className:"blast-zone"},i.a.createElement("div",{className:"top-row"},i.a.createElement(D,{title:"Controls"},t),i.a.createElement(D,{title:"Console"},n),i.a.createElement(D,{title:"Status Indicators"},a)),i.a.createElement("div",{className:"mid-row"},i.a.createElement(D,{title:"Tactical Grid"},i.a.createElement(R,{width:100,height:100,startAt:[this.state.gridX,this.state.gridY]}))),i.a.createElement("div",{className:"bottom-row"},i.a.createElement(D,{title:"OhWell"},i.a.createElement("span",null,":)"))))}}]),t}(i.a.Component)),z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).scenes={BlastZone:G,Game:B},n.SelectedScene=null,n.state={loadedScene:"Game"},n.handleChange.bind(Object(l.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){console.log(e),console.log(e.target),console.log(e.target.value);var t=e.target.value;this.setState((function(e){return{loadedScene:t}}))}},{key:"render",value:function(){var e=this,t=this.scenes[this.state.loadedScene];return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"meta-bar"},i.a.createElement("div",{className:"screen-switch"},i.a.createElement("span",null,"Select screen: "),i.a.createElement("select",{value:this.state.loadedScene,onChange:function(t){return e.handleChange(t)}},i.a.createElement("option",{value:"BlastZone"},"BlastZone"),i.a.createElement("option",{value:"Game"},"Game")))),i.a.createElement(t,null))}}]),t}(i.a.Component);n(43);Object(r.render)(i.a.createElement(z,null),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.cfae0466.chunk.js.map