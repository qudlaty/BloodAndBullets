(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(8),r=n(1),s=n(2),c=n(4),l=n(3),u=n(5),p=n(6);function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.forEach((function(e){n.forEach((function(t){e&&(e[t]=void 0)}))}))}function d(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function m(e,t){return Math.floor(Math.random()*(t-e+1))+e}function f(e,t){var n;return t>=0?n=-Math.atan(e/t)*(180/Math.PI):t<0&&(n=180/Math.PI*(Math.atan(e/-t)+Math.PI)),n}function y(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function v(e,t){return!!(e&&t&&t.entity&&e.name===t.entity.name)}n(14);var b={active:"active",isAvailableDestination:"is-available-destination",isChosenDestination:"is-chosen-destination",isBreathing:"breathing",isDead:"dead",isShooting:"shooting",isTargeted:"targeted"};var g=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).renderCounter=0,n.shouldComponentUpdate=function(e){return JSON.stringify(e)!==JSON.stringify(n.props)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t="square",n="Square".concat(this.props.squareId);t+=function(e,t){var n="";return Object.keys(b).forEach((function(t){e[t]&&(n+=" ".concat(b[t]," "))})),n}(this.props);var i,o,r="".concat((Math.random()+.5).toFixed(2),"s"),s=this.props.isBreathing?"breathing ".concat(r," alternate infinite linear"):"none",c=this.props.targetPosition,l=5,u=[],p="",h="blood-".concat(n);p+="\n\n      .".concat(h," {\n        background: rgba(255,0,0, ").concat((this.props.blood/30).toFixed(2),")\n      }\n\n    "),h+=" blood ";var d=f;if(this.props.items&&this.props.items.length&&(i+=" has-items ",o=this.props.items.length),c&&this.props.position&&this.props.isShooting&&(this.props.targetPosition.x!==this.props.position.x||this.props.targetPosition.y!==this.props.position.y)&&c){var m=38*(c.x-this.props.position.x),v=38*(c.y-this.props.position.y),g=y(m,v);if("lazer"===this.props.weaponType){var E="projectile".concat(n,"_beam"),k=d(m,v);p="\n            @keyframes pulsing".concat(n," {\n              0%  {opacity: 0.1;}\n              100%  {opacity: 1;}\n            }\n\n            @keyframes elongating").concat(n," {\n              0%  {width: ").concat(g-20,";}\n              100%  {width: ").concat(g+20,";}\n            }\n\n            @keyframes swiping").concat(n," {\n              0%  {transform: rotate(").concat(k+90+-1,"deg);}\n              50%  {transform: rotate(").concat(k+90+1,"deg);}\n              100%  {transform: rotate(").concat(k+90-1,"deg);}\n            }\n\n            .").concat(E," {\n              width: ").concat(g,"px;\n              height: 3px;\n              border-radius: 5px;\n              background: #F00;\n              position: absolute;\n              top: 16px;\n              left: 16px;\n\n              transform: rotate(").concat(k+90,"deg);\n              transform-origin: left 0px;\n              animation: pulsing").concat(n," 0.1s linear infinite,\n              elongating").concat(n," 1s linear alternate infinite,\n              swiping").concat(n," 1s linear alternate infinite;\n              box-shadow: 0 0 5px 5px white;\n              z-index: 10;\n            }\n            "),u.push(a.a.createElement("div",{key:E,className:E},""))}else{for(p="\n            @keyframes shooting".concat(n," {\n              0%   {transform: scale(1);}\n              100% {transform: translate(\n                ").concat(36*(c.x-this.props.position.x),"px,\n                ").concat(36*(c.y-this.props.position.y),"px\n              )}\n            }\n            ");l--;)p+="\n            .projectile".concat(n,"_").concat(l," {\n              position: absolute;\n              top: -5px;\n              left: 0px;\n              width: 100%;\n              height: 100%;\n              line-height: 34px;\n              font-size: 30px;\n              animation: shooting").concat(n," 0.5s linear infinite;\n              animation-delay: ").concat(l-.3,"s;\n              color: white;\n            }");var O=this.props.isShooting?".":"";for(l=3;l--;){var j="projectile projectile".concat(n,"_").concat(l);u.push(a.a.createElement("div",{key:j,className:j},O))}}}return a.a.createElement("button",{className:t,onClick:function(){return e.props.onClick(e.props.squareId)}},a.a.createElement("div",{className:h},this.props.blood),a.a.createElement("div",{className:i},o),a.a.createElement("div",{className:"content",style:{animation:s}},this.props.icon),a.a.createElement("style",null,p),u)}}]),t}(a.a.Component),E=(n(15),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).renderCounter=0,n.handleClick=n.handleClick.bind(Object(p.a)(n)),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){console.log("Handles Click on Board",e),this.props.onClick(e)}},{key:"renderSquare",value:function(e,t,n){var i=this.props.squares[e],o=this.props.squares[e]&&this.props.squares[e].entity;return a.a.createElement(g,{key:e,squareId:e,rowNumber:t,colNumber:n,onClick:this.handleClick,icon:o&&o.icon,active:o&&o.active,isBreathing:o&&o.isBreathing,isDead:o&&o.isDead,isShooting:o&&o.isShooting,weaponType:o&&o.equipment&&o.equipment.hands&&o.equipment.hands.type,position:o&&o.position,targetPosition:o&&o.targetPosition,blood:i&&i.blood,items:i&&i.items,isAvailableDestination:i&&i.isAvailableDestination,isChosenDestination:i&&i.isChosenDestination,isTargeted:i&&i.isTargeted})}},{key:"render",value:function(){var e,t=this,n=0,i=0,o=Array(this.props.size).fill(null).map((function(o,r){e=0;var s=Array(t.props.size).fill(null).map((function(a,o){return t.renderSquare(n++,i,e++)}));return a.a.createElement("div",{key:i++,className:"board-row"},s)})),r="board "+this.props.className;return a.a.createElement("div",{className:r},o)}}]),t}(a.a.PureComponent));n(16);function k(e){var t="linear-display ".concat(e.className||""),n=~~(100*e.current/e.max),i=n>100;i&&(n=100,t+=" overload ");var o={width:"".concat(n,"%")},r=e.title||"".concat(e.current,"/").concat(e.max),s=e.current,c=1;e.max>=40&&e.max<100?c=5:e.max>=100&&(c=10);var l={backgroundSize:"".concat(100/(s/=c),"% 100%"),backgroundImage:"\n      linear-gradient(to left, ".concat("black"," 1px, transparent 1px)\n    ")};return Object.assign(o,l),a.a.createElement("div",{className:t},a.a.createElement("div",{className:"linear-display__label"},e.label,":\xa0"),a.a.createElement("div",{className:"linear-display__bar-container",title:r},a.a.createElement("div",{className:"linear-display__bar-progress",style:o},a.a.createElement("span",{className:"linear-display__bar-progress-text"},e.current,i?"/"+e.max:"","\xa0"))),a.a.createElement("div",null,"\xa0"))}n(17);function O(e){var t,n,i="inventory-list ".concat(e.className||"");if(!e.inventory)return null;var o=e.inventory.map((function(i){if(i.reload){var o=" inventory-list__reload-button ";0===i.rounds||"empty"===i.rounds?o+=" inventory-list__reload-button--empty ":i.rounds<i.maxRounds&&(o+=" inventory-list__reload-button--partial "),t=a.a.createElement("button",{className:o,onClick:function(){i.reload(),e.onClick(i.name)}},"Reload")}else t=null;return n=a.a.createElement("button",{className:"inventory-list__drop-button",onClick:function(){e.onDrop(i.name)}},"Drop"),a.a.createElement("div",{key:i.name},a.a.createElement("div",{onClick:function(){return e.onClick(i.name)},key:i.name,className:"inventory-list__item"},a.a.createElement("span",null,i.name)),t,n)}));return a.a.createElement("div",{className:i},a.a.createElement("div",{className:"inventory-list__label"},e.label,":\xa0"),a.a.createElement("div",{className:"inventory-list__container",title:e.title},o))}n(18);var j,x=new(function(){function e(){Object(r.a)(this,e),this.arenaSize=10,this.squares=[];for(var t=this.arenaSize*this.arenaSize;0!==t--;)this.initializeSquareIfEmpty(t)}return Object(s.a)(e,[{key:"getSquare",value:function(e,t){return this.squares[this.targetSquareIndex(e,t)]}},{key:"setSquare",value:function(e,t,n){this.squares[this.targetSquareIndex(e,t)]=n}},{key:"targetSquareIndex",value:function(e,t){return t*this.arenaSize+e}},{key:"targetSquarePosition",value:function(e){var t;return t=Math.floor(e/this.arenaSize),{x:e%this.arenaSize,y:t}}},{key:"setEntityWithinApropriateSquare",value:function(e){this.setEntityWithinASquare(e.position.x,e.position.y,e)}},{key:"setEntityWithinASquare",value:function(e,t,n){var i=this.targetSquareIndex(e,t);this.initializeSquareIfEmpty(i),this.squares[i].entity=n}},{key:"addBlood",value:function(e,t){e||(e={}),e.blood?e.blood+=t:e.blood=t}},{key:"markSquareAsTargeted",value:function(e){h(this.squares,"isTargeted"),this.initializeSquareIfEmpty(e),this.squares[e].isTargeted=!0}},{key:"initializeSquareIfEmpty",value:function(e){this.squares[e]||(this.squares[e]={})}},{key:"markAvailableDestinationsForSelectedEntity",value:function(e){if(e.active){var t=e.position,n=t.x,i=t.y;h(this.squares,"isAvailableDestination");for(var a=i-1;a<=i+1;a++)if(!(a<0||a>=this.arenaSize))for(var o=n-1;o<=n+1;o++)if(!(o<0||o>=this.arenaSize||o===n&&a===i)){var r=this.getSquare(o,a);r||(r={}),r.isAvailableDestination=!0,this.setSquare(o,a,r)}}}}]),e}()),q=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).renderCount=0,n.handleInventoryClick=function(e){n.props.onInventoryClick(n.props.entity,e)},n.renderAmmo=function(e){if(e)return a.a.createElement(k,{label:"Rounds",current:e.rounds,max:e.maxRounds})},n.onDrop=function(e){var t=n.props.entity;t.unEquipFromHands();var i=t.takeFromInventory(e),a=x.getSquare(t.position.x,t.position.y);a.items||(a.items=[]),a.items.push(i),n.props.onInventoryClick(n.props.entity,"")},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.entity;if(!e)return null;var t=" entity ";e.active&&(t+=" active ");var n=e.isDead?" DEAD ":" ALIVE ";t+=e.isFriendly?" friendly ":" unfriendly ",t+=n;var i=e.equipment&&e.equipment.hands,o=i&&[i]||[];return a.a.createElement("div",{className:t},a.a.createElement("div",null,a.a.createElement("div",{className:"position",title:"Position"},a.a.createElement("span",null," ",e.position.x," ",e.position.y," ")),a.a.createElement("div",{className:"portrait"},e.icon)),a.a.createElement("strong",{title:"Name"},e.name),a.a.createElement("br",null)," ",n,a.a.createElement("br",null),a.a.createElement("div",{style:{clear:"both",display:"inline-block",textAlign:"right"}},a.a.createElement(k,{label:"HP",current:e.hp,max:e.maxHp}),a.a.createElement("br",null),this.renderAmmo(i)),a.a.createElement(O,{label:"Equipped",title:"In hands",onClick:this.handleInventoryClick,onDrop:this.onDrop,inventory:o}),a.a.createElement(O,{label:"Inventory",title:"In backpack",onClick:this.handleInventoryClick,onDrop:this.onDrop,inventory:e.inventory}))}}]),t}(a.a.Component),S=(n(19),function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).renderCounter=0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.entities.filter((function(e){return e.isFriendly})).map((function(t){return a.a.createElement(q,{onInventoryClick:e.props.onInventoryClick,entity:t,key:t.name})})),n=this.props.entities.filter((function(e){return!e.isFriendly})).map((function(e){return a.a.createElement(q,{entity:e,key:e.name})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",{className:"list-of-entities__header"},"List of Entities:"),a.a.createElement("div",{className:"list-of-entities"},t),a.a.createElement("div",{className:"list-of-entities"},n))}}]),t}(a.a.Component)),A=new(function(){function e(){Object(r.a)(this,e),this.entities=void 0,this.selected=void 0}return Object(s.a)(e,[{key:"getEntityId",value:function(e){return e.name}},{key:"findEntityById",value:function(e){return this.entities.filter((function(t){return t.name===e}))[0]}},{key:"findItemOnEntity",value:function(e,t){return e.inventory.filter((function(e){return e.name===t}))[0]}},{key:"moveEntityRandomly",value:function(e){if(!e.isDead){var t=e.position.x,n=e.position.y;e.position.x=e.position.x+m(-1,1),e.position.y=e.position.y+m(-1,1),e.position.x=d(e.position.x,0,9),e.position.y=d(e.position.y,0,9);var i=x.getSquare(e.position.x,e.position.y);i&&i.entity&&(e.position.x=t,e.position.y=n)}}},{key:"stopBreathingForKilledEntity",value:function(e){return e&&e.hp<=0&&(e.isBreathing=!1,e.hp=0),e}},{key:"getEntitiesAtGivenPosition",value:function(e){return this.entities.filter((function(t){return t.position.x===e.x&&t.position.y===e.y}))}},{key:"selectEntityFromGivenSquare",value:function(e,t){return e&&t&&t.entity&&(e.active=!1),t&&t.entity&&((e=t.entity).active=!0),e}},{key:"setSelected",value:function(e,t){var n=this.findEntityById(this.getEntityId(e));return t?e.active=t:(e=null,console.log("Nullified:",e)),n.active=t,e}},{key:"checkAmmoAndCalculateDamageApplied",value:function(e){var t=0,n=e.equipment&&e.equipment.hands;return n?(n.isAbleToFire?t=n.fire():(n.rounds="empty",e.isShooting=!1),t):0}},{key:"fireAShot",value:function(e){var t=this;if(e.ceaseFire)return e.isShooting=!1,void(e.ceaseFire=!1);var n=this.checkAmmoAndCalculateDamageApplied(e);this.getEntitiesAtGivenPosition(e.targetPosition).forEach((function(i){t.applyDamageToTargetEntity(i,n),t.ceaseFireNextTickIfTargetIsKilled(e,i)}))}},{key:"applyDamageToTargetEntity",value:function(e,t){t&&(e.hp-=t,e.bleeding=5)}},{key:"ceaseFireNextTickIfTargetIsKilled",value:function(e,t){t.hp<0&&(e.ceaseFire=!0)}},{key:"isEntityShootingProperly",value:function(e){return e.isShooting&&e.targetPosition&&(e.targetPosition.x!==e.position.x||e.targetPosition.y!==e.position.y)}},{key:"applyEffectsOfBleeding",value:function(e){if(e.bleeding&&e.hp>0){e.hp-=e.bleeding;var t=x.getSquare(e.position.x,e.position.y);x.addBlood(t,e.bleeding),e.bleeding-=e.bleedingReductionPerTurn}return e}},{key:"moveEntityIntoChosenDestination",value:function(e){if(!e.isDead&&e.moveDestination){var t=x.getSquare(e.moveDestination.x,e.moveDestination.y);e.position=e.moveDestination,delete e.moveDestination,t.isChosenDestination=void 0}return e}},{key:"setMoveDestinationOnASelectedEntity",value:function(e,t){e.moveDestination=t}},{key:"moveEntities",value:function(){var e=this;this.entities.forEach((function(t){return e.moveEntityIntoChosenDestination(t)}));var t=this.findEntityById("John Rambo"),n=this.findEntityById("Squid"),i=this.findEntityById("Octo");this.moveEntityRandomly(t),this.moveEntityRandomly(n),this.moveEntityRandomly(i)}}]),e}()),C=x,I=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onMoveClick",value:function(e,t){e.setMoveDestinationPosition(t),C.getSquare(t.x,t.y).isChosenDestination=!0,this.props.processInterface()}},{key:"onAttackClick",value:function(e,t){e.attackPosition(t),this.props.processInterface()}},{key:"render",value:function(){var e=this;if(!this.props.targeted)return null;var t,n,i,o,r,s=this.props.targeted,c=this.props.selected,l=this.props.targeted,u=C.targetSquarePosition(this.props.squareNumber),p=[];if(l&&l.entity&&!v(this.props.selected,this.props.targeted)&&(t=a.a.createElement(q,{onInventoryClick:this.props.onInventoryClick,entity:l.entity})),l&&l.items&&(r=a.a.createElement(O,{label:"Items in this location",title:"On the floor",onClick:null,onDrop:null,inventory:l.items})),c){var h=y(u.x-c.position.x,u.y-c.position.y);n=a.a.createElement("li",null,"Distance to selected: ",~~h),0!==h&&(l&&l.isAvailableDestination&&(p[0]=a.a.createElement("button",{onClick:function(){return e.onMoveClick(c,u)},className:"button"},"Move")),l&&l.entity&&(p[1]=a.a.createElement("button",{onClick:function(){return e.onAttackClick(c,u)},className:"button"},"Attack")))}return u&&(i=a.a.createElement("li",null,"Position: [ ",u.x,", ",u.y," ]"," ")),s&&s.blood&&(o=a.a.createElement("li",null,"Blood amount: ",s.blood)),a.a.createElement("div",{className:this.props.className},a.a.createElement("strong",null,"Target square Info"),a.a.createElement("div",null,t),a.a.createElement("div",null,p),a.a.createElement("ul",null,i,n,o,r))}}]),t}(a.a.Component),N=new(function(){function e(){Object(r.a)(this,e),this.messages=[]}return Object(s.a)(e,[{key:"send",value:function(e){this.messages.push(e)}}]),e}()),D=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).causesBleeding=0,n.range=0,n.damage=0,n}return Object(u.a)(t,e),t}((function e(){Object(r.a)(this,e)})),w=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).rounds=0,n.maxRounds=5,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fire",value:function(){return this.rounds--,console.log("Firing ranged weapon. Damage: ",this.damage),this.damage}},{key:"reload",value:function(){this.rounds=this.maxRounds}},{key:"isAbleToFire",get:function(){return this.rounds>0}}]),t}(D),B=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).type="projectile",n.range=4,n.damage=1,n.causesBleeding=4,n}return Object(u.a)(t,e),t}(w),P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).type="lazer",n.range=6,n.damage=5,n.causesBleeding=0,n}return Object(u.a)(t,e),t}(w),F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).name="M16",n.rounds=15,n.maxRounds=20,n.damage=2,n}return Object(u.a)(t,e),t}(B),T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).name="Assault Lazer Cannon",n.rounds=3,n.maxRounds=3,n.damage=10,n}return Object(u.a)(t,e),t}(P),R=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).name="M41A Pulse Rifle",n.rounds=40,n.maxRounds=40,n.damage=1,n}return Object(u.a)(t,e),t}(B),M=function e(){Object(r.a)(this,e),this.name="An Entity",this.icon="E"},_=function e(){Object(r.a)(this,e),this.position={x:void 0,y:void 0}},z=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).moveDestination=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setMoveDestinationSquare",value:function(e){this.setMoveDestinationPosition(C.targetSquarePosition(e))}},{key:"setMoveDestinationPosition",value:function(e){var t=C.getSquare(e.x,e.y);!t.entity||t.entity.isDead?(this.moveDestination=e,h(C.squares,"isChosenDestination"),t.isChosenDestination=!0):N.send("".concat(this.name," cannot move into square ").concat(e.x," ").concat(e.y))}}]),t}(M),H=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).hp=100,n.maxHp=100,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isDead",get:function(){return this.hp<=0}}]),t}(_),L=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).bleeding=void 0,n.bleedingReductionPerTurn=1,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"bleed",value:function(){var e=0;return this.bleeding&&this.hp>0&&(e=this.bleeding,this.hp-=e,this.bleeding-=this.bleedingReductionPerTurn),e}},{key:"bleedExternally",value:function(){if(this.bleeding){var e=this.bleed(),t=C.getSquare(this.position.x,this.position.y);C.addBlood(t,e)}}}]),t}(H),W=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).isSupposedToBeBreathing=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isBreathing",get:function(){return this.hp>0&&this.isSupposedToBeBreathing},set:function(e){this.isSupposedToBeBreathing=e}}]),t}(H),G=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).targetPosition=void 0,n.isShooting=void 0,n.ceaseFire=void 0,n.hasWeapon=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"attackPosition",value:function(e){this.hasWeapon?(this.targetPosition=e,this.isShooting=!0):N.send("".concat(this.name," no fkin weapon in hands"))}}]),t}(M),J=function(){function e(){Object(r.a)(this,e),this.inventory=void 0}return Object(s.a)(e,[{key:"takeFromInventory",value:function(e){var t=this.inventory.findIndex((function(t){return t.name==e}));return this.inventory.splice(t,1)[0]}},{key:"addToInventory",value:function(e){this.inventory.push(e)}}]),e}(),K=function e(){Object(r.a)(this,e),this.active=void 0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Object.assign.apply(Object,[this].concat(n))};j=K,[M,_,H,L,z,W,G,J,function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).equipment=void 0,n.hasWeapon=void 0,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"equipInHands",value:function(e){this.unEquipFromHands();var t=this.takeFromInventory(e);this.equipment.hands=t,t instanceof D&&(this.hasWeapon=!0)}},{key:"unEquipFromHands",value:function(){this.equipment.hands&&(this.inventory.push(this.equipment.hands),this.equipment.hands=null)}}]),t}(J)].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){Object.defineProperty(j.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))}))}));var U=[{name:"John Rambo",age:40,hp:95,maxHp:100,icon:"\ud83d\ude20",isBreathing:!0,isFriendly:!0,position:{x:8,y:8},inventory:[{name:"KA-BAR"},new F],equipment:{head:"Red Bandana",hands:null}},{name:"Ellen Replay",age:30,hp:50,maxHp:65,icon:"\ud83d\udc69",isBreathing:!0,isFriendly:!0,position:{x:1,y:8},inventory:[new R,{name:"Motion Detector"}],equipment:{head:"Afro"}},{name:"Lazer Blady",age:60,hp:75,maxHp:100,icon:"\ud83e\uddd1\ud83c\udffb",isBreathing:!0,isFriendly:!0,position:{x:4,y:8},inventory:[new T,new F],equipment:{}},{name:"Lux Aeterna",age:20,hp:50,maxHp:50,icon:"\ud83d\udc71\u200d\u2640\ufe0f",isBreathing:!0,isFriendly:!0,position:{x:1,y:1},inventory:[new T],equipment:{}},{name:"Robot",age:1,hp:50,maxHp:50,icon:"\ud83e\udd16",isBreathing:!1,position:{x:4,y:5}},{name:"Octo",age:8,hp:200,maxHp:200,icon:"\ud83d\udc19",isBreathing:!0,position:{x:8,y:2},bleedingReductionPerTurn:0,bleeding:1},{name:"Squid",age:5,hp:100,maxHp:100,icon:"\ud83e\udd91",isBreathing:!0,position:{x:5,y:5}},{name:"Ant",age:1,hp:45,maxHp:50,icon:"\ud83d\udc1c",isBreathing:!0,position:{x:7,y:6}},{name:"Spider",age:1,hp:100,maxHp:150,icon:"\ud83d\udd77\ufe0f",isBreathing:!0,position:{x:9,y:3},bleedingReductionPerTurn:1},{name:"Mosquito",age:1,hp:12,maxHp:20,icon:"\ud83e\udd9f",isBreathing:!0,position:{x:2,y:7}},{name:"Microbe",age:1,hp:1,maxHp:5,icon:"\ud83e\udda0",isBreathing:!0,position:{x:3,y:5}}].map((function(e){return new K(e)})),V=new(function(){function e(t){Object(r.a)(this,e),this.entities=void 0,this.entities=t}return Object(s.a)(e,[{key:"access",value:function(){console.log("Accessing Game Model"),console.log(this.entities)}}]),e}())(U),Q=(n(20),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.selected?a.a.createElement("div",{className:"selected"},a.a.createElement("strong",null,"Selected entity "),a.a.createElement("div",null,a.a.createElement(q,{onInventoryClick:this.props.onInventoryClick,entity:this.props.selected})),a.a.createElement("button",{onClick:this.props.handleDeselectAllEntities,className:"button"}," ","Deselect")):null}}]),t}(a.a.Component)),X=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).messages=N.messages,n.renderMessage=function(e,t){return a.a.createElement("li",null,"Message nr[",t,"]: ",e)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.messages.map((function(t,n){return e.renderMessage(t,n)}));return a.a.createElement("ul",null,t)}}]),t}(a.a.Component),Y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).renderCounter=0,n.stepNumber=0,n.loop=function(){n.stepNumber++,n.processEntities(),n.state.autoLoop&&setTimeout(n.loop,1e3)},n.nextTick=function(){n.setState({autoLoop:!1}),n.loop()},n.newHandleClick=function(e){n.setState((function(t){var i=t.squares,a=t.entities,o=t.selected,r=t.targeted,s=t.selectedSquareNumber,c=r;r=i[e];var l=function(){return c===r};return C.markSquareAsTargeted(e),l()&&r.isAvailableDestination&&o.setMoveDestinationSquare(e),(l()||o)&&(!o&&r.entity?o=A.selectEntityFromGivenSquare(o,r):v(o,r)&&(n.deselectAllEntities(),o=void 0),s=e),l()&&o&&r.entity&&o.attackPosition(C.targetSquarePosition(e)),{squares:i,entities:a,selected:o,targeted:r,selectedSquareNumber:s}}),n.processInterface)},n.nuke=function(e){n.setState((function(t){var n=t.entities;return n.forEach((function(t){t.hp=t.hp-e})),{entities:n}}),(function(){n.processEntities()}))},n.toggleRotateBoard=function(){n.setState({isBoardRotated:!n.state.isBoardRotated})},n.switchAutoLoop=function(){n.setState((function(e){return{autoLoop:!e.autoLoop}}),(function(){n.state.autoLoop&&n.loop()}))},n.onInventoryClick=function(e,t){n.setState((function(n){var i=[].concat(n.entities),a=A.getEntityId(e),o=A.findEntityById(a);A.findItemOnEntity(o,t);return o.equipment.hands&&o.equipment.hands.name==t?o.unEquipFromHands():o.equipInHands(t),{entities:i}})),console.log(e,t)},n.handleDeselectAllEntities=function(){n.setState((function(e){var t=e.squares,i=e.entities;e.selected;return n.deselectAllEntities(),void 0,{squares:t,entities:i,selected:void 0}}),(function(){}))},n.deselectAllEntities=function(){h(A.entities,"active"),h(C.squares,"isChosenDestination","isAvailableDestination")},n.ceaseFire=function(){n.setState((function(e){var t=e.squares,n=e.entities,i=e.selected;return h(n,"isShooting"),{squares:t,entities:n,selected:i}}),(function(){n.processInterface()}))},n.state={targeted:null,selected:null,arenaSize:10,isBoardRotated:!1,entities:V.entities,squares:C.squares,autoLoop:!0,selectedSquareNumber:null},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){A.entities=this.state.entities,this.loop()}},{key:"setSquaresAccordingToEntities",value:function(){this.setState((function(e){var t=[].concat(e.squares),n=e.entities;return C.squares=t,h(t,"entity"),n.forEach((function(e){C.setEntityWithinApropriateSquare(e)})),{squares:t}}))}},{key:"calculateNextGameState",value:function(e){var t=e,n=t.entities;t.squares,t.selected;return A.moveEntities(),n.forEach((function(e){A.isEntityShootingProperly(e)&&A.fireAShot(e),e.bleedExternally(),A.stopBreathingForKilledEntity(e),C.markAvailableDestinationsForSelectedEntity(e)})),t}},{key:"calculateNextInterfaceState",value:function(e){var t=e;return t.entities.forEach((function(e){C.markAvailableDestinationsForSelectedEntity(e)})),t}},{key:"processEntities",value:function(){var e=this;this.setState((function(t){return e.calculateNextGameState(t)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"processInterface",value:function(){var e=this;this.setState((function(t){return e.calculateNextInterfaceState(t)}),(function(){return e.setSquaresAccordingToEntities()}))}},{key:"render",value:function(){var e=this,t=this.state.isBoardRotated?"rotated-board":"";return a.a.createElement("div",{className:"game"},a.a.createElement("div",{className:"game-board"},a.a.createElement(E,{squares:this.state.squares,onClick:function(t){return e.newHandleClick(t)},size:this.state.arenaSize,className:t})),a.a.createElement("div",{className:"game-info"},a.a.createElement("div",{className:"actions"},a.a.createElement("button",{onClick:function(){e.nuke(40)},className:"button button-nuke"},"Nuke All"),a.a.createElement("button",{onClick:this.ceaseFire,className:"button"},"Cease Fire"),a.a.createElement("button",{onClick:this.toggleRotateBoard,className:"button"},"Rotate Board"),a.a.createElement("button",{onClick:this.nextTick,className:"button"},"Next Tick"),a.a.createElement("span",{className:"step-counter"},"Tick: ",this.stepNumber),a.a.createElement("label",{className:"auto-cycle button"},a.a.createElement("input",{type:"checkbox",checked:this.state.autoLoop,onChange:this.switchAutoLoop}),a.a.createElement("span",null,"Auto Cycle"))),a.a.createElement("div",{className:"interaction-container"},a.a.createElement(Q,{selected:this.state.selected,handleDeselectAllEntities:this.handleDeselectAllEntities,onInventoryClick:this.onInventoryClick}),a.a.createElement(I,{className:"targeted",squareNumber:this.state.selectedSquareNumber,squares:this.state.squares,selected:this.state.selected,targeted:this.state.targeted,onInventoryClick:this.onInventoryClick,processInterface:function(){return e.processInterface()}}),a.a.createElement("div",null)),a.a.createElement(X,null)),a.a.createElement("div",{className:"game-list"},a.a.createElement(S,{entities:this.state.entities,onInventoryClick:this.onInventoryClick})))}}]),t}(a.a.PureComponent);n(21);Object(o.render)(a.a.createElement(Y,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.7bf59408.chunk.js.map